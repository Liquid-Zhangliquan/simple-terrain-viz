/*!
 * author: sakitam-fdd <smilefdd@gmail.com>
 * maptalks-regl-with-loaders.gl v1.0.0
 * build-time: 2021-2-18 15:18
 * LICENSE: MIT
 * (c) 2020-2021 https://github.com/sakitam-gis/simple-terrain-viz
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("regl"),require("maptalks"),require("module"),require("path"),require("child_process"),require("fs"),require("util")):"function"==typeof define&&define.amd?define(["exports","regl","maptalks","module","path","child_process","fs","util"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TerrainLayer={},e.createREGL,e.maptalks,e.Module,e.path$1,e.ChildProcess,e.fs$1,e.util)}(this,(function(e,t,r,n,a,o,i,u){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=s(t),f=s(n),l=s(a),p=s(o),d=s(i),h=s(u),y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var b="undefined"!=typeof Float32Array?Float32Array:Array;function g(){var e=new b(3);return b!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function m(e,t,r){var n=new b(3);return n[0]=e,n[1]=t,n[2]=r,n}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function w(){var e=new b(4);return b!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}g(),function(){var e,t=(e=new b(4),b!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e)}();var x;g(),m(1,0,0),m(0,1,0),w(),w(),x=new b(9),b!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[5]=0,x[6]=0,x[7]=0),x[0]=1,x[4]=1,x[8]=1,function(){var e=function(){var e=new b(2);return b!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function k(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var j=P((function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}}));function _(e,t){if(!e)throw new Error(t||"loader assertion failed.")}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document},A=E.self||E.window||E.global,T=E.window||E.self||E.global,I=E.global||E.self||E.window,L=E.document||{},M="object"!==("undefined"==typeof process?"undefined":S(process))||"[object process]"!==String(process)||process.browser,B="function"==typeof importScripts,D="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),R=D&&parseFloat(D[1])||0;function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=P((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof l?t:l,o=Object.create(a.prototype),i=new k(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return j()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=c(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var f={};function l(){}function p(){}function d(){}var h={};h[a]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(P([])));v&&v!==t&&r.call(v,a)&&(h=v);var b=d.prototype=l.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function m(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,u){var s=c(e[a],e,o);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(l).then((function(e){f.value=e,i(f)}),(function(e){return n("throw",e,i,u)}))}u(s.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return p.prototype=b.constructor=d,d.constructor=p,p.displayName=u(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(m.prototype),m.prototype[o]=function(){return this},e.AsyncIterator=m,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new m(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(b),u(b,i,"Generator"),b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function F(e,t,r,n,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){F(o,n,a,i,u,"next",e)}function u(e){F(o,n,a,i,u,"throw",e)}i(void 0)}))}}function N(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=r||new Set;if(e){if(W(e))n.add(e);else if(W(e.buffer))n.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"===S(e))for(var a in e)N(e[a],t,n)}else;return void 0===r?Array.from(n):[]}function W(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.3.12";_(e,"no loader provided");var r=e.version;t&&r&&(t=Y(t),r=Y(r))}function Y(e){var t=e.split(".").map(Number);return{major:t[0],minor:t[1]}}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){return $.apply(this,arguments)}function $(){return($=z(C.mark((function e(t){var r,n,a,o,i,u,s;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.loader,n=t.arraybuffer,t.byteOffset,t.byteLength,a=t.options,o=t.context,!r.parseSync&&!r.parse){e.next=6;break}i=n,u=r.parseSync||r.parse,e.next=13;break;case 6:if(!r.parseTextSync){e.next=12;break}s=new TextDecoder,i=s.decode(n),u=r.parseTextSync,e.next=13;break;case 12:throw new Error("Could not load data with ".concat(r.name," loader"));case 13:return a=Q(Q({},a),{},{modules:r&&r.options&&r.options.modules||{},worker:!1}),e.next=16,u(i,Q({},a),o,r);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return e&&"parse"===e.type&&e.source&&e.source.startsWith("loaders.gl")}function X(e){this.wrapped=e}function H(e){return new X(e)}function Z(e){var t,r;function n(t,r){try{var o=e[t](r),i=o.value,u=i instanceof X;Promise.resolve(u?i.wrapped:i).then((function(e){u?n("return"===t?"return":"next",e):a(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(o,i){var u={key:e,arg:a,resolve:o,reject:i,next:null};r?r=r.next=u:(t=r=u,n(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function K(e){return function(){return new Z(e.apply(this,arguments))}}function ee(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}function te(){return(te=K(C.mark((function e(t,r,n){var a,o,i,u,s,c,f,l,p,d;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new r(n),o=!0,i=!1,e.prev=3,s=ee(t);case 5:return e.next=7,H(s.next());case 7:return c=e.sent,o=c.done,e.next=11,H(c.value);case 11:if(f=e.sent,o){e.next=23;break}return l=f,e.next=16,H(a.write(l));case 16:if(!(p=e.sent)){e.next=20;break}return e.next=20,p;case 20:o=!0,e.next=5;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(3),i=!0,u=e.t0;case 29:if(e.prev=29,e.prev=30,o||null==s.return){e.next=34;break}return e.next=34,H(s.return());case 34:if(e.prev=34,!i){e.next=37;break}throw u;case 37:return e.finish(34);case 38:return e.finish(29);case 39:return e.next=41,H(a.end());case 41:if(!(d=e.sent)){e.next=45;break}return e.next=45,d;case 45:case"end":return e.stop()}}),e,null,[[3,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),e}"function"==typeof Symbol&&Symbol.asyncIterator&&(Z.prototype[Symbol.asyncIterator]=function(){return this}),Z.prototype.next=function(e){return this._invoke("next",e)},Z.prototype.throw=function(e){return this._invoke("throw",e)},Z.prototype.return=function(e){return this._invoke("return",e)};var oe=new Map;var ie=0;function ue(e){var t=e.data;(0,e.resolve)(t)}var se=function(){function e(t){var r=t.source,n=t.name,a=void 0===n?"web-worker-".concat(ie++):n,o=t.onMessage;re(this,e);var i=function(e){if(_("string"==typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")")){var t=e.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;e=function(e){return"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n}")}(t)}var r=oe.get(e);if(!r){var n=new Blob([e],{type:"application/javascript"});r=URL.createObjectURL(n),oe.set(e,r)}return r}(r);this.worker=new Worker(i,{name:a}),this.name=a,this.onMessage=o||ue}var t;return ae(e,[{key:"process",value:(t=z(C.mark((function e(t){var r=this;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){r.worker.onmessage=function(t){r.onMessage({worker:r.worker,data:t.data,resolve:e,reject:n})},r.worker.onerror=function(e){var t="".concat(r.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var a=new Error(t);console.error(e),n(a)};var a=N(t);r.worker.postMessage(t,a)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),ce=function(){function e(t){var r=t.source,n=t.name,a=void 0===n?"unnamed":n,o=t.maxConcurrency,i=void 0===o?1:o,u=t.onMessage,s=t.onDebug,c=void 0===s?function(){}:s,f=t.reuseWorkers,l=void 0===f||f;re(this,e),this.source=r,this.name=a,this.maxConcurrency=i,this.onMessage=u,this.onDebug=c,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.reuseWorkers=l}var t;return ae(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:function(e,t){var r=this;return new Promise((function(n,a){r.jobQueue.push({data:e,jobName:t,resolve:n,reject:a}),r._startQueuedJob()}))}},{key:"_startQueuedJob",value:(t=z(C.mark((function e(){var t,r;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.jobQueue.length){e.next=2;break}return e.abrupt("return");case 2:if(t=this._getAvailableWorker()){e.next=5;break}return e.abrupt("return");case 5:return r=this.jobQueue.shift(),this.onDebug({message:"processing",worker:t.name,job:r.jobName,backlog:this.jobQueue.length}),e.prev=7,e.t0=r,e.next=11,t.process(r.data);case 11:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(7),r.reject(e.t2);case 18:return e.prev=18,this._onWorkerDone(t),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,15,18,21]])}))),function(){return t.apply(this,arguments)})},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.reuseWorkers?this.idleQueue.push(e):(e.destroy(),this.count--),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new se({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),fe=function(){function e(t){var r=t.maxConcurrency,n=void 0===r?5:r,a=t.onMessage,o=void 0===a?null:a,i=t.onDebug,u=void 0===i?function(){}:i,s=t.reuseWorkers,c=void 0===s||s;re(this,e),this.maxConcurrency=n,this.onMessage=o,this.onDebug=u,this.workerPools=new Map,this.reuseWorkers=c}var t;return ae(e,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),ae(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug),"reuseWorkers"in e&&(this.reuseWorkers=e.reuseWorkers)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:(t=z(C.mark((function e(t,r,n){var a;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this._getWorkerPool(t,r),e.abrupt("return",a.process(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,t){var r=this.workerPools.get(t);return r||(r=new ce({source:e,name:t,onMessage:le.bind(null,this.onMessage),maxConcurrency:this.maxConcurrency,onDebug:this.onDebug,reuseWorkers:this.reuseWorkers}),this.workerPools.set(t,r)),r}}]),e}();function le(e,t){var r=t.worker,n=t.data,a=t.resolve,o=t.reject;if(e)e({worker:r,data:n,resolve:a,reject:o});else switch(n.type){case"done":a(n.result);break;case"error":o(n.message)}}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e){if(e.startsWith("http"))throw new Error("require from remote script not supported in Node.js: ".concat(e));return e.startsWith("/")||(e="".concat(process.cwd(),"/").concat(e)),require(e)}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"===S(t)&&(r=t,t=""),r=de({appendPaths:[],prependPaths:[]},r),"string"!=typeof e)throw new Error("code must be a string, not ".concat(S(e)));var n=f.default._nodeModulePaths(l.default.dirname(t)),a=module.parent,o=new f.default(t,a);return o.filename=t,o.paths=[].concat(r.prependPaths).concat(n).concat(r.appendPaths),o._compile(e,t),a&&a.children&&a.children.splice(a.children.indexOf(o),1),o.exports}var ve={};function be(){return(be=z(C.mark((function e(t){var r,n,a=arguments;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n=a.length>2&&void 0!==a[2]?a[2]:{},r&&(t=ge(t,r,n)),ve[t]=ve[t]||me(t),e.next=6,ve[t];case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,r){var n=r.modules||{};return n[e]?n[e]:M?r.CDN?(_(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(t,"@").concat("2.3.12","/dist/libs/").concat(e)):B?"../src/libs/".concat(e):"modules/".concat(t,"/src/libs/").concat(e):"modules/".concat(t,"/dist/libs/").concat(e)}function me(e){return we.apply(this,arguments)}function we(){return(we=z(C.mark((function e(t){var r,n,a;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.endsWith("wasm")){e.next=7;break}return e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.arrayBuffer();case 6:return e.abrupt("return",e.sent);case 7:if(M){e.next=9;break}return e.abrupt("return",he&&he(t));case 9:if(!B){e.next=11;break}return e.abrupt("return",importScripts(t));case 11:return e.next=13,fetch(t);case 13:return n=e.sent,e.next=16,n.text();case 16:return a=e.sent,e.abrupt("return",xe(a,t));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){if(!M)return ye&&ye(e,t);if(B)return eval.call(I,e),null;var r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch(t){r.text=e}return document.body.appendChild(r),null}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return ke(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var r=0;return ke(e,r,t)}return""}function ke(e,t,r){if(e.byteLength<=t+r)return"";for(var n=new DataView(e),a="",o=0;o<r;o++)a+=String.fromCharCode(n.getUint8(t+o));return a}function Pe(e){return Buffer.isBuffer(e)?new Uint8Array(e).buffer:e}function je(e){if(ArrayBuffer.isView(e)&&(e=e.buffer),"undefined"!=typeof Buffer&&e instanceof ArrayBuffer){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t}return _(!1)}function _e(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,a=t.map((function(e){return e instanceof ArrayBuffer?new Uint8Array(e):e})),o=a.reduce((function(e,t){return e+t.byteLength}),0),i=new Uint8Array(o),u=0,s=_e(a);try{for(s.s();!(n=s.n()).done;){var c=n.value;i.set(c,u),u+=c.byteLength}}catch(e){s.e(e)}finally{s.f()}return i.buffer}function Ae(e,t,r){var n=void 0!==r?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(n).buffer}function Te(e){return e+3&-4}function Ie(e,t,r){var n=Te(r.byteLength),a=n-r.byteLength;if(e){var o=new Uint8Array(e.buffer,e.byteOffset+t,r.byteLength),i=new Uint8Array(r);o.set(i);for(var u=0;u<a;++u)e.setUint8(t+r.byteLength+u,32)}return t+=n}var Le=Object.freeze({__proto__:null,dirname:function(e){var t=e&&e.lastIndexOf("/");return t>=0?e.substr(0,t):""}}),Me="",Be={};function De(){return(De=K(C.mark((function e(t,r){var n,a,o,i,u,s,c,f;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new TextDecoder(r),a=!0,o=!1,e.prev=3,u=ee(t);case 5:return e.next=7,H(u.next());case 7:return s=e.sent,a=s.done,e.next=11,H(s.value);case 11:if(c=e.sent,a){e.next=19;break}return f=c,e.next=16,"string"==typeof f?f:n.decode(f,{stream:!0});case 16:a=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),o=!0,i=e.t0;case 25:if(e.prev=25,e.prev=26,a||null==u.return){e.next=30;break}return e.next=30,H(u.return());case 30:if(e.prev=30,!o){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[3,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function Re(){return(Re=K(C.mark((function e(t,r){var n,a,o,i,u,s,c,f;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new TextEncoder,a=!0,o=!1,e.prev=3,u=ee(t);case 5:return e.next=7,H(u.next());case 7:return s=e.sent,a=s.done,e.next=11,H(s.value);case 11:if(c=e.sent,a){e.next=19;break}return f=c,e.next=16,"string"==typeof f?n.encode(f):f;case 16:a=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),o=!0,i=e.t0;case 25:if(e.prev=25,e.prev=26,a||null==u.return){e.next=30;break}return e.next=30,H(u.return());case 30:if(e.prev=30,!o){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(25);case 35:case"end":return e.stop()}}),e,null,[[3,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function Ue(){return(Ue=K(C.mark((function e(t){var r,n,a,o,i,u,s,c,f;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="",n=!0,a=!1,e.prev=3,i=ee(t);case 5:return e.next=7,H(i.next());case 7:return u=e.sent,n=u.done,e.next=11,H(u.value);case 11:if(s=e.sent,n){e.next=26;break}r+=s,c=void 0;case 16:if(!((c=r.indexOf("\n"))>=0)){e.next=23;break}return f=r.slice(0,c+1),r=r.slice(c+1),e.next=21,f;case 21:e.next=16;break;case 23:n=!0,e.next=5;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(3),a=!0,o=e.t0;case 32:if(e.prev=32,e.prev=33,n||null==i.return){e.next=37;break}return e.next=37,H(i.return());case 37:if(e.prev=37,!a){e.next=40;break}throw o;case 40:return e.finish(37);case 41:return e.finish(32);case 42:if(!(r.length>0)){e.next=45;break}return e.next=45,r;case 45:case"end":return e.stop()}}),e,null,[[3,28,32,42],[33,,37,41]])})))).apply(this,arguments)}function Ce(){return(Ce=K(C.mark((function e(t){var r,n,a,o,i,u,s,c;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=1,n=!0,a=!1,e.prev=3,i=ee(t);case 5:return e.next=7,H(i.next());case 7:return u=e.sent,n=u.done,e.next=11,H(u.value);case 11:if(s=e.sent,n){e.next=20;break}return c=s,e.next=16,{counter:r,line:c};case 16:r++;case 17:n=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(3),a=!0,o=e.t0;case 26:if(e.prev=26,e.prev=27,n||null==i.return){e.next=31;break}return e.next=31,H(i.return());case 31:if(e.prev=31,!a){e.next=34;break}throw o;case 34:return e.finish(31);case 35:return e.finish(26);case 36:case"end":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35]])})))).apply(this,arguments)}function Fe(){return(Fe=z(C.mark((function e(t,r){var n,a,o;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.next();case 3:if(n=e.sent,a=n.done,o=n.value,!a){e.next=9;break}return t.return(),e.abrupt("return");case 9:if(!r(o)){e.next=12;break}return e.abrupt("return");case 12:e.next=0;break;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(){return(ze=z(C.mark((function e(t){var r,n,a,o,i,u,s,c,f;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=[],a=!0,o=!1,e.prev=4,u=ee(t);case 6:return e.next=8,u.next();case 8:return s=e.sent,a=s.done,e.next=12,s.value;case 12:if(c=e.sent,a){e.next=19;break}"string"==typeof(f=c)?n.push(f):r.push(f);case 16:a=!0,e.next=6;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),o=!0,i=e.t0;case 25:if(e.prev=25,e.prev=26,a||null==u.return){e.next=30;break}return e.next=30,u.return();case 30:if(e.prev=30,!o){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(25);case 35:if(!(n.length>0)){e.next=38;break}return _(0===r.length),e.abrupt("return",n.join(""));case 38:return e.abrupt("return",Ee.apply(void 0,r));case 39:case"end":return e.stop()}}),e,null,[[4,21,25,35],[26,,30,34]])})))).apply(this,arguments)}function Ne(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){var t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}var We=function(){function e(t,r){re(this,e),this.name=t,this.type=r,this.sampleSize=1,this.reset()}return ae(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Ne(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Ne()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),qe=function(){function e(t){var r=t.id,n=t.stats;re(this,e),this.id=r,this.stats={},this._initializeStats(n),Object.seal(this)}return ae(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,r=e.type;return this.stats[t]||(this.stats[t]=e instanceof We?e:new We(t,r)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}();function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qe={id:"request-scheduler",throttleRequests:!0,maxRequests:6},Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(this,e),this.props=Ve(Ve({},Qe),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new qe({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}return ae(e,[{key:"scheduleRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var r={handle:e,getPriority:t},n=new Promise((function(e){return r.resolve=e,r}));return this.requestQueue.push(r),this.requestMap.set(e,n),this._issueNewRequests(),n}},{key:"_issueRequest",value:function(e){var t=this,r=e.handle,n=e.resolve,a=!1,o=function(){a||(a=!0,t.requestMap.delete(r),t.activeRequestCount--,t._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}},{key:"_issueNewRequests",value:function(){var e=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return e._issueNewRequestsAsync()}),0))}},{key:"_issueNewRequestsAsync",value:function(){this._deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==e){this._updateAllRequests();for(var t=0;t<e;++t)if(this.requestQueue.length>0){var r=this.requestQueue.shift();this._issueRequest(r)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,t=0;t<e.length;++t){var r=e[t];this._updateRequest(r)||(e.splice(t,1),this.requestMap.delete(r.handle),t--)}e.sort((function(e,t){return e.priority-t.priority}))}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),!(e.priority<0)||(e.resolve(null),!1)}}]),e}();function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Je(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return new Promise((function(t,r){p.default.exec("lsof -i -P -n | grep LISTEN",(function(r,n,a){if(r)t(e);else{var o=[],i=/:(\d+) \(LISTEN\)/;n.split("\n").forEach((function(e){var t=e.match(i);t&&o.push(Number(t[1]))}));for(var u=e;o.includes(u);)u++;t(u)}}))}))}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ke={command:null,arguments:[],portArg:null,port:"auto",basePort:5e3,wait:2e3,nodeSpawnOptions:{maxBuffer:512e4},onSuccess:function(e){console.log("Started ".concat(e.options.command))}},et=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=void 0===r?"browser-driver":r;re(this,e),this.id=n,this.childProcess=null,this.port=null}var t,r,n;return ae(e,[{key:"start",value:(n=z(C.mark((function e(){var t,r,n=this,a=arguments;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},_((t=Ze(Ze({},Ke),t)).command&&"string"==typeof t.command),this.options=t,r=Je(t.arguments),this.port=t.port,!t.portArg){e.next=12;break}if("auto"!==this.port){e.next=11;break}return e.next=10,Xe(t.basePort);case 10:this.port=e.sent;case 11:r.push(t.portArg,this.port);case 12:return e.next=14,new Promise((function(e,a){try{var o=setTimeout((function(){t.onSuccess&&t.onSuccess(n),e({})}),t.wait);console.log("Spawning ".concat(t.command," ").concat(t.arguments.join(" "))),n.childProcess=p.default.spawn(t.command,r,t.spawn),n.childProcess.stderr.on("data",(function(e){console.log('Child process wrote to stderr: "'.concat(e,'".')),clearTimeout(o),a(new Error(e))})),n.childProcess.on("error",(function(e){console.log("Child process errored with ".concat(e)),clearTimeout(o),a(e)})),n.childProcess.on("close",(function(e){console.log("Child process exited with ".concat(e)),n.childProcess=null}))}catch(e){a(e)}}));case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"stop",value:(r=z(C.mark((function e(){return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.childProcess&&(this.childProcess.kill(),this.childProcess=null);case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"exit",value:(t=z(C.mark((function e(){var t,r=arguments;return C.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.prev=1,e.next=4,this.stop();case 4:process.exit(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0.message||e.t0),process.exit(1);case 11:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(){return t.apply(this,arguments)})}]),e}();var tt=Object.freeze({__proto__:null,path:Le,assert:_,isBrowser:M,isWorker:B,nodeVersion:R,self:A,window:T,global:I,document:L,createWorker:function(e){if("undefined"!=typeof self){var t,r=0,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(a,o){var i=r++;self.addEventListener("message",(function e(t){var r=t.data;if(r&&r.id===i)switch(r.type){case"parse-done":self.removeEventListener("message",e),a(r.result);break;case"parse-error":self.removeEventListener("message",e),o(r.message)}})),self.postMessage({type:"parse",id:i,arraybuffer:e,options:t,url:n},[e])}))};self.onmessage=(t=z(C.mark((function t(r){var a,o,i,u,s,c,f,l,p,d;return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.data,t.prev=1,J(a,e.name)){t.next=4;break}return t.abrupt("return");case 4:return q(e,a.source.split("@")[1]),o=a.arraybuffer,i=a.byteOffset,u=void 0===i?0:i,s=a.byteLength,c=void 0===s?0:s,f=a.options,l=void 0===f?{}:f,t.next=8,G({loader:e,arraybuffer:o,byteOffset:u,byteLength:c,options:l,context:{parse:n}});case 8:p=t.sent,d=N(p),self.postMessage({type:"done",result:p},d),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),self.postMessage({type:"error",message:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[1,13]])}))),function(e){return t.apply(this,arguments)})}},validateLoaderVersion:q,makeTransformIterator:function(e,t,r){return te.apply(this,arguments)},getTransferList:N,_WorkerFarm:fe,_WorkerPool:ce,_WorkerThread:se,getLibraryUrl:ge,loadLibrary:function(e){return be.apply(this,arguments)},parseJSON:function(e){try{return JSON.parse(e)}catch(t){throw new Error('Failed to parse JSON from data starting with "'.concat(Oe(e),'"'))}},isBuffer:function(e){return e&&"object"===S(e)&&e.isBuffer},toBuffer:function(e){return je?je(e):e},bufferToArrayBuffer:function(e){return Pe?Pe(e):e},toArrayBuffer:function(e){if(Pe&&(e=Pe(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return e&&"object"===S(e)&&e._toArrayBuffer?e._toArrayBuffer():_(!1)},sliceArrayBuffer:Ae,concatenateArrayBuffers:Ee,compareArrayBuffers:function(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;for(var n=new Uint8Array(e),a=new Uint8Array(t),o=0;o<n.length;++o)if(n[o]!==a[o])return!1;return!0},padTo4Bytes:Te,copyToArray:function(e,t,r){var n;if(e instanceof ArrayBuffer)n=new Uint8Array(e);else{var a=e.byteOffset,o=e.byteLength;n=new Uint8Array(e.buffer,a,o)}return t.set(n,r),r+Te(n.byteLength)},copyArrayBuffer:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength,a=new Uint8Array(e,r,n),o=new Uint8Array(t);return a.set(o),e},copyPaddedArrayBufferToDataView:Ie,copyPaddedStringToDataView:function(e,t,r){return t=Ie(e,t,(new TextEncoder).encode(r))},padStringToByteAlignment:function(e,t){for(var r=e.length,n=Math.ceil(r/t)*t-r,a="",o=0;o<n;++o)a+=" ";return e+a},copyStringToDataView:function(e,t,r,n){if(e)for(var a=0;a<n;a++)e.setUint8(t+a,r.charCodeAt(a));return t+n},copyBinaryToDataView:function(e,t,r,n){if(e)for(var a=0;a<n;a++)e.setUint8(t+a,r[a]),t++;return t+n},getFirstCharacters:Oe,getMagicString:ke,setPathPrefix:function(e){Me=e},getPathPrefix:function(){return Me},resolvePath:function(e){for(var t in Be)if(e.startsWith(t)){var r=Be[t];e=e.replace(t,r)}return e.startsWith("http://")||e.startsWith("https://")||(e="".concat(Me).concat(e)),e},_addAliases:function(e){Object.assign(Be,e)},makeTextEncoderIterator:function(e,t){return Re.apply(this,arguments)},makeTextDecoderIterator:function(e,t){return De.apply(this,arguments)},makeLineIterator:function(e){return Ue.apply(this,arguments)},makeNumberedLineIterator:function(e){return Ce.apply(this,arguments)},forEach:function(e,t){return Fe.apply(this,arguments)},concatenateChunksAsync:function(e){return ze.apply(this,arguments)},RequestScheduler:Ge,ChildProcessProxy:et,_getMeshSize:function(e){var t=0;for(var r in e){var n=e[r];ArrayBuffer.isView(n)&&(t+=n.byteLength*n.BYTES_PER_ELEMENT)}return t},getMeshBoundingBox:function(e){if(!e||!e.POSITION)return null;var t=1/0,r=1/0,n=1/0,a=-1/0,o=-1/0,i=-1/0,u=e.POSITION.value,s=u&&u.length;if(!s)return null;for(var c=0;c<s;c+=3){var f=u[c],l=u[c+1],p=u[c+2];t=f<t?f:t,r=l<r?l:r,n=p<n?p:n,a=f>a?f:a,o=l>o?l:o,i=p>i?p:i}return[[t,r,n],[a,o,i]]},getZeroOffsetArrayBuffer:function(e,t,r){return Ae(e,t,r)}});function rt(e,t,r,n,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,a)}P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;tt.global.loaders=Object.assign(tt.global.loaders||{},{VERSION:"2.3.12"});var r=tt.global.loaders;t.default=r}));var nt=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){rt(o,n,a,i,u,"next",e)}function u(e){rt(o,n,a,i,u,"throw",e)}i(void 0)}))}},at=P((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t})),ot=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isWritableStream=t.isReadableStream=t.isReadableNodeStream=t.isWritableNodeStream=t.isBuffer=t.isReadableDOMStream=t.isWritableDOMStream=t.isBlob=t.isFile=t.isResponse=t.isIterator=t.isAsyncIterable=t.isIterable=t.isPromise=t.isPureObject=t.isObject=void 0;var r=j(at),n=function(e){return"boolean"==typeof e},a=function(e){return"function"==typeof e},o=function(e){return null!==e&&"object"===(0,r.default)(e)};t.isObject=o;t.isPureObject=function(e){return o(e)&&e.constructor==={}.constructor};t.isPromise=function(e){return o(e)&&a(e.then)};t.isIterable=function(e){return e&&"function"==typeof e[Symbol.iterator]};t.isAsyncIterable=function(e){return e&&"function"==typeof e[Symbol.asyncIterator]};t.isIterator=function(e){return e&&a(e.next)};t.isResponse=function(e){return"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json};t.isFile=function(e){return"undefined"!=typeof File&&e instanceof File};t.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob};var i=function(e){return o(e)&&a(e.abort)&&a(e.getWriter)};t.isWritableDOMStream=i;var u=function(e){return"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||o(e)&&a(e.tee)&&a(e.cancel)&&a(e.getReader)};t.isReadableDOMStream=u;t.isBuffer=function(e){return e&&"object"===(0,r.default)(e)&&e.isBuffer};var s=function(e){return o(e)&&a(e.end)&&a(e.write)&&n(e.writable)};t.isWritableNodeStream=s;var c=function(e){return o(e)&&a(e.read)&&a(e.pipe)&&n(e.readable)};t.isReadableNodeStream=c;t.isReadableStream=function(e){return u(e)||c(e)};t.isWritableStream=function(e){return i(e)||s(e)}})),it=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseMIMEType=function(e){if("string"!=typeof e)return"";var t=e.match(n);if(t)return t[1];return e},t.parseMIMETypeFromURL=function(e){if("string"!=typeof e)return"";var t=e.match(r);if(t)return t[1];return""};var r=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,n=/^([-\w.]+\/[-\w.+]+)/})),ut=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceUrlAndType=function(e){if((0,ot.isResponse)(e)){var t=(0,it.parseMIMEType)(e.headers.get("content-type")),r=(0,it.parseMIMETypeFromURL)(e.url);return{url:n(e.url||""),type:t||r||null}}if((0,ot.isBlob)(e))return{url:n(e.name||""),type:e.type||""};if("string"==typeof e)return{url:n(e),type:(0,it.parseMIMETypeFromURL)(e)};return{url:"",type:""}},t.getResourceContentLength=function(e){if((0,ot.isResponse)(e))return e.headers["content-length"]||-1;if((0,ot.isBlob)(e))return e.size;if("string"==typeof e)return e.length;if(e instanceof ArrayBuffer)return e.byteLength;if(ArrayBuffer.isView(e))return e.byteLength;return-1};var r=/\?.*/;function n(e){return e.replace(r,"")}})),st=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeResponse=function(e){return a.apply(this,arguments)},t.checkResponse=function(e){return o.apply(this,arguments)},t.checkResponseSync=function(e){if(!e.ok){var t="".concat(e.status," ").concat(e.statusText);throw t=t.length>60?"".concat(t.slice(60),"..."):t,new Error(t)}};var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t){var n,a,o,i,u,c,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,ot.isResponse)(t)){e.next=2;break}return e.abrupt("return",t);case 2:return n={},(a=(0,ut.getResourceContentLength)(t))>=0&&(n["content-length"]=String(a)),o=(0,ut.getResourceUrlAndType)(t),i=o.url,(u=o.type)&&(n["content-type"]=u),e.next=9,s(t);case 9:return(c=e.sent)&&(n["x-first-bytes"]=c),"string"==typeof t&&(t=(new TextEncoder).encode(t)),f=new Response(t,{headers:n}),Object.defineProperty(f,"url",{value:i}),e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=(0,n.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=5;break}return e.next=3,i(t);case 3:throw n=e.sent,new Error(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return u.apply(this,arguments)}function u(){return(u=(0,n.default)(r.default.mark((function e(t){var n,a,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,a=t.headers.get("Content-Type"),o=t.statusText,!a.includes("application/json")){e.next=11;break}return e.t0=o,e.t1=" ",e.next=9,t.text();case 9:e.t2=e.sent,o=e.t0+=e.t1.concat.call(e.t1,e.t2);case 11:n=(n+=o).length>60?"".concat(n.slice(60),"..."):n,e.next=17;break;case 15:e.prev=15,e.t3=e.catch(1);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return(c=(0,n.default)(r.default.mark((function e(t){var n,a,o,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=5,"string"!=typeof t){e.next=3;break}return e.abrupt("return","data:,".concat(t.slice(0,n)));case 3:if(!(t instanceof Blob)){e.next=8;break}return a=t.slice(0,5),e.next=7,new Promise((function(e){var t=new FileReader;t.onload=function(t){return e(t.target&&t.target.result)},t.readAsDataURL(a)}));case 7:return e.abrupt("return",e.sent);case 8:if(!(t instanceof ArrayBuffer)){e.next=12;break}return o=t.slice(0,n),i=f(o),e.abrupt("return","data:base64,".concat(i));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){for(var t="",r=new Uint8Array(e),n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}})),ct=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMessageFromResponseSync=function(e){return"Failed to fetch resource ".concat(e.url,"(").concat(e.status,"): ").concat(e.statusText," ")},t.getErrorMessageFromResponse=function(e){return a.apply(this,arguments)};var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): "),e.prev=1,!t.headers.get("Content-Type").includes("application/json")){e.next=10;break}return e.t0=n,e.next=7,t.text();case 7:n=e.t0+=e.sent,e.next=11;break;case 10:n+=t.statusText;case 11:e.next=16;break;case 13:return e.prev=13,e.t1=e.catch(1),e.abrupt("return",n);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}})),ft=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFile=function(e){return a.apply(this,arguments)};var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t){var n,a,o=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},"string"==typeof t){e.next=5;break}return e.next=4,(0,st.makeResponse)(t);case 4:return e.abrupt("return",e.sent);case 5:return t=(0,tt.resolvePath)(t),e.next=8,fetch(t,n);case 8:if((a=e.sent).ok||!n.throws){e.next=15;break}return e.t0=Error,e.next=13,(0,ct.getErrorMessageFromResponse)(a);case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),lt=P((function(e){function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==at(e)&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}}));var pt=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},dt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.readFileSync=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=u(t),!n.default||!n.default.readFileSync)return null;var r=n.default.readFileSync(e,t);return r instanceof Buffer?(0,tt.toArrayBuffer)(r):r};var r=j(pt),n=j(d.default);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i={dataType:"arraybuffer",nothrow:!0};function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"text"!==(e=o(o({},i),e)).responseType&&"text"!==e.dataType||(e.encoding=e.encoding||"utf8"),e}})),ht=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.readFileSyncBrowser=function(e,t){t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=Object.assign({},r,e)).responseType=e.responseType||e.dataType,e}(t),n=e,void n.startsWith("data:");var n;t.nothrow||(0,tt.assert)(!1);return null};var r={dataType:"arraybuffer",nothrow:!0}})),yt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.readFileSync=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=(0,tt.resolvePath)(e),!tt.isBrowser&&r.readFileSync)return r.readFileSync(e,t);return(0,ht.readFileSyncBrowser)(e,t)};var r=lt(dt)})),vt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.writeFile=function(e,t,n){return(0,h.default.promisify)(r.default.writeFile)("".concat(e),(0,tt.toBuffer)(t),{flag:"w"})},t.writeFileSync=function(e,t,n){return r.default.writeFileSync("".concat(e),(0,tt.toBuffer)(t),{flag:"w"})};var r=j(d.default)})),bt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.writeFile=function(e,t,n){if(e=(0,tt.resolvePath)(e),!tt.isBrowser&&r.writeFile)return r.writeFile(e,t,n);return(0,tt.assert)(!1)},t.writeFileSync=function(e,t,n){if(e=(0,tt.resolvePath)(e),!tt.isBrowser&&r.writeFileSync)return r.writeFileSync(e,t,n);return(0,tt.assert)(!1)};var r=lt(vt)}));var gt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var wt=function(e,t,r){return t&&mt(e.prototype,t),r&&mt(e,r),e},xt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLog=t.NullLog=void 0;var r=j(gt),n=j(wt),a=function(){function e(){(0,r.default)(this,e)}return(0,n.default)(e,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),e}();t.NullLog=a;var o=function(){function e(){(0,r.default)(this,e),this.console=console}return(0,n.default)(e,[{key:"log",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.log).bind.apply(e,[this.console].concat(r))}},{key:"info",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.info).bind.apply(e,[this.console].concat(r))}},{key:"warn",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.warn).bind.apply(e,[this.console].concat(r))}},{key:"error",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.console.error).bind.apply(e,[this.console].concat(r))}}]),e}();t.ConsoleLog=o})),Ot=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalOptions=function(e){var t=c(),r=f();t.globalOptions=d(r,e)},t.normalizeOptions=function(e,t,r,a){return r=r||[],r=Array.isArray(r)?r:[r],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;l(e,null,r,u,s,t);var a,o=n(t);try{for(o.s();!(a=o.n()).done;){var i=a.value,c=e&&e[i.id]||{},f=i.options&&i.options[i.id]||{},p=i.defaultOptions&&i.defaultOptions[i.id]||{};l(c,i.id,r,f,p,t)}}catch(e){o.e(e)}finally{o.f()}}(e,r),d(t,e,a)},t.getFetchFunction=function(e,t){var r=f(),n=e.fetch||r.fetch;if("function"==typeof n)return n;if((0,ot.isObject)(n))return function(e){return(0,ft.fetchFile)(e,n)};if(t&&t.fetch)return t.fetch;return function(t){return(0,ft.fetchFile)(t,e)}},t.getGlobalLoaderState=void 0;var r=j(pt);function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={baseUri:"",fetch:null,CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new xt.ConsoleLog,metadata:!1,transforms:[],reuseWorkers:!0},s={dataType:"(no longer used)",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"},c=function(){tt.global.loaders=tt.global.loaders||{};var e=tt.global.loaders;return e._state=e._state||{},e._state};t.getGlobalLoaderState=c;var f=function(){var e=c();return e.globalOptions=e.globalOptions||i({},u),e.globalOptions};function l(e,t,r,n,a,o){var i=t||"Top level",u=t?"".concat(t,"."):"";for(var s in e){var c=!t&&(0,ot.isObject)(e[s]);if(!(s in n))if(s in a)r.warn("".concat(i," loader option '").concat(u).concat(s,"' deprecated, use '").concat(a[s],"'"));else if(!c){var f=p(s,o);r.warn("".concat(i," loader option '").concat(u).concat(s,"' not recognized. ").concat(f))}}}function p(e,t){var r,a=e.toLowerCase(),o="",i=n(t);try{for(i.s();!(r=i.n()).done;){var u=r.value;for(var s in u.options){if(e===s)return"Did you mean '".concat(u.id,".").concat(s,"'?");var c=s.toLowerCase();(a.startsWith(c)||c.startsWith(a))&&(o=o||"Did you mean '".concat(u.id,".").concat(s,"'?"))}}}catch(e){i.e(e)}finally{i.f()}return o}function d(e,t,r){var n=i({},e.options||{});return null===n.log&&(n.log=new xt.NullLog),h(n,f()),h(n,t),function(e,t){t&&!e.baseUri&&(e.baseUri=t)}(n,r),n}function h(e,t){for(var r in t)if(r in t){var n=t[r];(0,ot.isPureObject)(n)&&(0,ot.isPureObject)(e[r])?e[r]=i(i({},e[r]),t[r]):e[r]=t[r]}}})),kt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setLoaderOptions=function(e){(0,Ot.setGlobalOptions)(e)}})),Pt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isLoaderObject=o,t.normalizeLoader=function(e){var t;(0,tt.assert)(e,"null loader"),(0,tt.assert)(o(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=a(a({},e=e[0]),{},{options:a(a({},e.options),t)}));e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension);Array.isArray(e.extensions)||(e.extensions=[e.extensions]);(0,tt.assert)(e.extensions&&e.extensions.length>0&&e.extensions[0]),(e.parseTextSync||e.parseText)&&(e.text=!0);e.text||(e.binary=!0);return e};var r=j(pt);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,r=e.options&&e.options[e.id];return t=t||r&&r.workerUrl}})),jt=P((function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.registerLoaders=function(e){var t,a=n(),o=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw i}}}}(e=Array.isArray(e)?e:[e]);try{var i=function(){var e=t.value,r=(0,Pt.normalizeLoader)(e);a.find((function(e){return r===e}))||a.unshift(r)};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}},t.getRegisteredLoaders=function(){return n()},t._unregisterLoaders=function(){(0,Ot.getGlobalLoaderState)().loaderRegistry=[]};var n=function(){var e=(0,Ot.getGlobalLoaderState)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry}})),_t=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeStringIterator=a;var r=j(C),n=r.default.mark(a);function a(e){var t,a,o,i,u,s,c,f=arguments;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=f.length>1&&void 0!==f[1]?f[1]:{},a=t.chunkSize,o=void 0===a?262144:a,i=0,u=new TextEncoder;case 4:if(!(i<e.length)){r.next=12;break}return s=Math.min(e.length-i,o),c=e.slice(i,i+s),i+=s,r.next=10,u.encode(c);case 10:r.next=4;break;case 12:case"end":return r.stop()}}),n)}})),St=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeArrayBufferIterator=a;var r=j(C),n=r.default.mark(a);function a(e){var t,a,o,i,u,s,c,f=arguments;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=f.length>1&&void 0!==f[1]?f[1]:{},a=t.chunkSize,o=void 0===a?262144:a,i=0;case 3:if(!(i<e.byteLength)){r.next=14;break}return u=Math.min(e.byteLength-i,o),s=new ArrayBuffer(u),c=new Uint8Array(e,i,u),new Uint8Array(s).set(c),i+=u,r.next=12,s;case 12:r.next=3;break;case 14:case"end":return r.stop()}}),n)}}));var Et=function(e){this.wrapped=e};var At=function(e){return new Et(e)};function Tt(e){var t,r;function n(t,r){try{var o=e[t](r),i=o.value,u=i instanceof Et;Promise.resolve(u?i.wrapped:i).then((function(e){u?n("return"===t?"return":"next",e):a(o.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,a){return new Promise((function(o,i){var u={key:e,arg:a,resolve:o,reject:i,next:null};r?r=r.next=u:(t=r=u,n(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(Tt.prototype[Symbol.asyncIterator]=function(){return this}),Tt.prototype.next=function(e){return this._invoke("next",e)},Tt.prototype.throw=function(e){return this._invoke("throw",e)},Tt.prototype.return=function(e){return this._invoke("return",e)};var It=Tt;var Lt=function(e){return function(){return new It(e.apply(this,arguments))}},Mt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeBlobIterator=function(e){return i.apply(this,arguments)},t.readFileSlice=u;var r=j(nt),n=j(C),a=j(At),o=j(Lt);function i(){return(i=(0,o.default)(n.default.mark((function e(t){var r,o,i,s,c,f=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>1&&void 0!==f[1]?f[1]:{},o=r.chunkSize||1048576,i=0;case 3:if(!(i<t.size)){e.next=13;break}return s=i+o,e.next=7,(0,a.default)(u(t,i,s));case 7:return c=e.sent,i=s,e.next=11,c;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,r){return s.apply(this,arguments)}function s(){return(s=(0,r.default)(n.default.mark((function e(t,r,a){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var o=t.slice(r,a),i=new FileReader;i.onload=function(t){return e(t.target&&t.target.result)},i.onerror=function(e){return n(e)},i.readAsArrayBuffer(o)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}));var Bt=function(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")},Dt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeStreamIterator=function(e){if(tt.isBrowser||tt.nodeVersion>=10){if("function"==typeof e[Symbol.asyncIterator])return function(e){return u.apply(this,arguments)}(e);if("function"==typeof e.getIterator)return e.getIterator()}return tt.isBrowser?function(e){return s.apply(this,arguments)}(e):function(e){return c.apply(this,arguments)}(e)};var r=j(nt),n=j(C),a=j(At),o=j(Lt),i=j(Bt);function u(){return(u=(0,o.default)(n.default.mark((function e(t){var r,o,u,s,c,f,l;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,o=!1,e.prev=2,s=(0,i.default)(t);case 4:return e.next=6,(0,a.default)(s.next());case 6:return c=e.sent,r=c.done,e.next=10,(0,a.default)(c.value);case 10:if(f=e.sent,r){e.next=18;break}return l=f,e.next=15,(0,tt.toArrayBuffer)(l);case 15:r=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),o=!0,u=e.t0;case 24:if(e.prev=24,e.prev=25,r||null==s.return){e.next=29;break}return e.next=29,(0,a.default)(s.return());case 29:if(e.prev=29,!o){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})))).apply(this,arguments)}function s(){return(s=(0,o.default)(n.default.mark((function e(t){var r,o,i,u;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getReader(),e.prev=1;case 2:return e.next=5,(0,a.default)(r.read());case 5:if(o=e.sent,i=o.done,u=o.value,!i){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,(0,tt.toArrayBuffer)(u);case 12:e.next=2;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),r.releaseLock();case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function c(){return(c=(0,o.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)(t);case 2:t=e.sent;case 3:if(null===(r=t.read())){e.next=9;break}return e.next=8,(0,tt.toArrayBuffer)(r);case 8:return e.abrupt("continue",3);case 9:if(!t._readableState.ended){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,(0,a.default)(f(t));case 13:e.next=3;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.once("readable",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Rt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeIterator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)return(0,_t.makeStringIterator)(e,t);if(e instanceof ArrayBuffer)return(0,St.makeArrayBufferIterator)(e,t);if((0,ot.isBlob)(e))return(0,Mt.makeBlobIterator)(e,t);if((0,ot.isReadableStream)(e))return(0,Dt.makeStreamIterator)(e);if((0,ot.isResponse)(e))return(0,Dt.makeStreamIterator)(e.body);return(0,tt.assert)(!1)}})),Ut=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getArrayBufferOrStringFromDataSync=o,t.getArrayBufferOrStringFromData=function(e,t){return i.apply(this,arguments)},t.getAsyncIteratorFromData=function(e){return u.apply(this,arguments)},t.getReadableStream=function(e){return c.apply(this,arguments)};var r=j(C),n=j(nt),a="Cannot convert supplied data type";function o(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer){var r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)||(0,ot.isBuffer)(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);var n=e.buffer,o=e.byteLength||e.length;return 0===e.byteOffset&&o===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+o)),n}throw new Error(a)}function i(){return(i=(0,n.default)(r.default.mark((function e(t,n){var i,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!i){e.next=3;break}return e.abrupt("return",o(t,n));case 3:if(!(0,ot.isBlob)(t)){e.next=7;break}return e.next=6,(0,st.makeResponse)(t);case 6:t=e.sent;case 7:if(!(0,ot.isResponse)(t)){e.next=21;break}return u=t,e.next=11,(0,st.checkResponse)(u);case 11:if(!n.binary){e.next=17;break}return e.next=14,u.arrayBuffer();case 14:e.t0=e.sent,e.next=20;break;case 17:return e.next=19,u.text();case 19:e.t0=e.sent;case 20:return e.abrupt("return",e.t0);case 21:if((0,ot.isReadableStream)(t)&&(t=(0,Rt.makeIterator)(t)),!(0,ot.isIterable)(t)&&!(0,ot.isAsyncIterable)(t)){e.next=24;break}return e.abrupt("return",(0,tt.concatenateChunksAsync)(t));case 24:throw new Error(a);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,ot.isIterator)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,ot.isResponse)(t)){e.next=6;break}return e.next=5,(0,st.checkResponse)(t);case 5:return e.abrupt("return",(0,Rt.makeIterator)(t.body));case 6:if(!(0,ot.isBlob)(t)&&!(0,ot.isReadableStream)(t)){e.next=8;break}return e.abrupt("return",(0,Rt.makeIterator)(t));case 8:if(!(0,ot.isAsyncIterable)(t)){e.next=10;break}return e.abrupt("return",t[Symbol.asyncIterator]());case 10:return e.abrupt("return",s(t));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){if(ArrayBuffer.isView(e))return r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buffer;case 2:case"end":return t.stop()}}),t)}))();if(e instanceof ArrayBuffer)return r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:case"end":return t.stop()}}),t)}))();if((0,ot.isIterator)(e))return e;if((0,ot.isIterable)(e))return e[Symbol.iterator]();throw new Error(a)}function c(){return(c=(0,n.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,ot.isReadableStream)(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(!(0,ot.isResponse)(t)){e.next=4;break}return e.abrupt("return",t.body);case 4:return e.next=6,(0,st.makeResponse)(t);case 6:return n=e.sent,e.abrupt("return",n.body);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}));var Ct=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n};var Ft=function(e){if(Array.isArray(e))return Ct(e)};var zt=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var Nt=function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}};var Wt=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var qt=function(e){return Ft(e)||zt(e)||Nt(e)||Wt()},Yt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getLoaderContext=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r)return r;e=o({fetch:(0,Ot.getFetchFunction)(t||{},e)},e),Array.isArray(e.loaders)||(e.loaders=null);return e},t.getLoaders=function(e,t){if(!t&&e&&!Array.isArray(e))return e;var n;e&&(n=Array.isArray(e)?e:[e]);if(t&&t.loaders){var a=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat((0,r.default)(n),(0,r.default)(a)):a}return n&&n.length?n:null};var r=j(qt),n=j(pt);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}})),Vt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.canParseWithWorker=function(e,t,r,n){if(!tt._WorkerFarm.isSupported())return!1;var a=r&&r[e.id];if("local"===r.worker&&a&&a.localWorkerUrl||r.worker&&a&&a.workerUrl)return!e.useWorker||e.useWorker(r);return!1},t.default=function(e,t,r,n){var i=(r||{}).worker,u=r&&r[e.id]||{},s="local"===i?u.localWorkerUrl:u.workerUrl,c="url(".concat(s,")"),f=e.name,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency);e.onDebug&&(t.onDebug=e.onDebug);"reuseWorkers"in e&&(t.reuseWorkers=e.reuseWorkers);a||(a=new tt._WorkerFarm({onMessage:o}));return a.setProps(t),a}(r);r=JSON.parse(JSON.stringify(r));var p="2.3.12"!==e.version?"(core version ".concat("2.3.12",")"):"";return l.process(c,"".concat(f,"-worker@").concat(e.version).concat(p),{arraybuffer:(0,tt.toArrayBuffer)(t),options:r,source:"loaders.gl@".concat("2.3.12"),type:"parse"})};var r=j(C),n=j(nt);var a=null;function o(e){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark((function e(t){var n,a,o,i,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.worker,a=t.data,o=t.resolve,i=t.reject,e.t0=a.type,e.next="done"===e.t0?4:"parse"===e.t0?6:"error"===e.t0?17:19;break;case 4:return o(a.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,(0,Gt.parse)(a.arraybuffer,a.options,a.url);case 9:u=e.sent,n.postMessage({type:"parse-done",id:a.id,result:u},(0,tt.getTransferList)(u)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),n.postMessage({type:"parse-error",id:a.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return i(a.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}})),Qt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.selectLoader=function(e){return p.apply(this,arguments)},t.selectLoaderSync=d;var r=j(C),n=j(pt),a=j(at),o=j(qt),i=j(nt);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=/\.([^.]+)$/;function p(){return(p=(0,i.default)(r.default.mark((function e(t){var n,a,o,i,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:[],a=u.length>2&&void 0!==u[2]?u[2]:{},o=u.length>3&&void 0!==u[3]?u[3]:{},!(i=d(t,n,s(s({},a),{},{nothrow:!0}),o))){e.next=6;break}return e.abrupt("return",i);case 6:if(!(0,ot.isBlob)(t)){e.next=11;break}return e.next=9,(0,Mt.readFileSlice)(t,0,10);case 9:t=e.sent,i=d(t,n,a,o);case 11:if(i||a.nothrow){e.next=13;break}throw new Error(h(t));case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t&&!Array.isArray(t))return(0,Pt.normalizeLoader)(t);y(t=[].concat((0,o.default)(t||[]),(0,o.default)((0,jt.getRegisteredLoaders)())));var a=(0,ut.getResourceUrlAndType)(e),i=a.url,u=a.type,s=v(t,i||n.url);if(!(s=(s=s||b(t,u))||g(t,e))&&!r.nothrow)throw new Error(h(e));return s}function h(e){var t=(0,ut.getResourceUrlAndType)(e),r=t.url,n=t.type,a="No valid loader found";return e&&(a+=' data: "'.concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return x(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var r=0;return x(e,r,t)}return""}(e),'", contentType: "').concat(n,'"')),r&&(a+=" url: ".concat(r)),a}function y(e){var t,r=c(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;(0,Pt.normalizeLoader)(n)}}catch(e){r.e(e)}finally{r.f()}}function v(e,t){var r=t&&t.match(l),n=r&&r[1];return n&&function(e,t){t=t.toLowerCase();var r,n=c(e);try{for(n.s();!(r=n.n()).done;){var a,o=r.value,i=c(o.extensions);try{for(i.s();!(a=i.n()).done;){if(a.value.toLowerCase()===t)return o}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return null}(e,n)}function b(e,t){var r,n=c(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.mimeTypes&&a.mimeTypes.includes(t))return a;if(t==="application/x.".concat(a.id))return a}}catch(e){n.e(e)}finally{n.f()}return null}function g(e,t){if(!t)return null;var r,n=c(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if("string"==typeof t){if(m(t,a))return a}else if(ArrayBuffer.isView(t)){if(w(t.buffer,t.byteOffset,a))return a}else if(t instanceof ArrayBuffer){if(w(t,0,a))return a}}}catch(e){n.e(e)}finally{n.f()}return null}function m(e,t){return t.testText&&t.testText(e)}function w(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some((function(n){return function(e,t,r,n){if(n instanceof ArrayBuffer)return(0,tt.compareArrayBuffers)(n,e,n.byteLength);switch((0,a.default)(n)){case"function":return n(e,r);case"string":var o=x(e,t,n.length);return n===o;default:return!1}}(e,t,r,n)}))}function x(e,t,r){if(e.byteLength<t+r)return"";for(var n=new DataView(e),a="",o=0;o<r;o++)a+=String.fromCharCode(n.getUint8(t+o));return a}})),Gt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parse=o;var r=j(C),n=j(nt),a=lt(Vt);function o(e,t,r,n){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark((function e(t,n,a,i){var s,c,f,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,tt.assert)(!i||"string"!=typeof i,"parse no longer accepts final url"),!n||Array.isArray(n)||(0,Pt.isLoaderObject)(n)||(i=a,a=n,n=null),e.next=4,t;case 4:return t=e.sent,a=a||{},s=(0,ut.getResourceUrlAndType)(t),c=s.url,f=(0,Yt.getLoaders)(n,i),e.next=10,(0,Qt.selectLoader)(t,f,a);case 10:if(l=e.sent){e.next=13;break}return e.abrupt("return",null);case 13:return a=(0,Ot.normalizeOptions)(a,l,f,c),i=(0,Yt.getLoaderContext)({url:c,parse:o,loaders:f},a,i),e.next=17,u(l,t,a,i);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,r,n){return s.apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t,n,o,i){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,tt.validateLoaderVersion)(t),e.next=3,(0,Ut.getArrayBufferOrStringFromData)(n,t);case 3:if(n=e.sent,!t.parseTextSync||"string"!=typeof n){e.next=7;break}return o.dataType="text",e.abrupt("return",t.parseTextSync(n,o,i,t));case 7:if(!(0,a.canParseWithWorker)(t,n,o,i)){e.next=11;break}return e.next=10,(0,a.default)(t,n,o,i);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parseText||"string"!=typeof n){e.next=15;break}return e.next=14,t.parseText(n,o,i,t);case 14:return e.abrupt("return",e.sent);case 15:if(!t.parse){e.next=19;break}return e.next=18,t.parse(n,o,i,t);case 18:return e.abrupt("return",e.sent);case 19:return(0,tt.assert)(!t.parseSync),e.abrupt("return",(0,tt.assert)(!1));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),$t=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseSync=function e(t,r,n,a){(0,tt.assert)(!a||"string"!=typeof a,"parseSync no longer accepts final url"),Array.isArray(r)||(0,Pt.isLoaderObject)(r)||(a=n,n=r,r=null);n=n||{};var o=(0,Yt.getLoaders)(r,a),i=(0,Qt.selectLoaderSync)(t,o,n);if(!i)return null;n=(0,Ot.normalizeOptions)(n,i,o);var u=(0,ut.getResourceUrlAndType)(t).url;return a=(0,Yt.getLoaderContext)({url:u,parseSync:e,loaders:r},n),function(e,t,r,n){if(t=(0,Ut.getArrayBufferOrStringFromDataSync)(t,e),e.parseTextSync&&"string"==typeof t)return e.parseTextSync(t,r,n,e);if(e.parseSync)return e.parseSync(t,r,n,e);throw new Error("".concat(e.name," loader: 'parseSync' not supported by this loader, use 'parse' instead. ").concat(n.url||""))}(i,t,n,a)}}));var Jt=function(e,t){var r={},n=!1;function a(r,a){return n=!0,a=new Promise((function(t){t(e[r](a))})),{done:!1,value:t(a)}}return"function"==typeof Symbol&&Symbol.iterator&&(r[Symbol.iterator]=function(){return this}),r.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n?(n=!1,e):a("return",e)}),r},Xt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInBatches=f;var r=j(C),n=j(nt),a=j(Lt),o=j(At),i=j(Bt),u=j(Jt);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t,r,n){return l.apply(this,arguments)}function l(){return(l=(0,n.default)(r.default.mark((function e(t,n,a,o){var i,u,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,tt.assert)(!o||"string"!=typeof o,"parseInBatches no longer accepts final url"),Array.isArray(n)||(0,Pt.isLoaderObject)(n)||(o=a,a=n,n=null),e.next=4,t;case 4:return t=e.sent,a=a||{},i=(0,ut.getResourceUrlAndType)(t),u=i.url,e.next=9,(0,Qt.selectLoader)(t,n,a);case 9:if(s=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return a=(0,Ot.normalizeOptions)(a,s,n,u),o=(0,Yt.getLoaderContext)({url:u,parseInBatches:f,parse:Gt.parse,loaders:n},a,o),e.next=16,p(s,t,a,o);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,n.default)(r.default.mark((function e(t,n,s,c){var f,l,p,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(){return(d=(0,a.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return e.delegateYield((0,u.default)((0,i.default)(t),o.default),"t0",3);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},p=function(e){return d.apply(this,arguments)},e.next=4,h(t,n,s,c);case 4:if(f=e.sent,s.metadata){e.next=7;break}return e.abrupt("return",f);case 7:return l={batchType:"metadata",metadata:{_loader:t,_context:c},data:[],bytesUsed:0},e.abrupt("return",p(f));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,r,n){return y.apply(this,arguments)}function y(){return(y=(0,n.default)(r.default.mark((function e(t,n,i,u){var s,c,f,l,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(){return(p=(0,a.default)(r.default.mark((function e(){var a,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.default)((0,Ut.getAsyncIteratorFromData)(n));case 2:return a=e.sent,e.next=5,(0,o.default)((0,tt.concatenateChunksAsync)(a));case 5:return s=e.sent,e.next=8,t.parse(s,i,u,t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(){return p.apply(this,arguments)},!t.parseInBatches){e.next=10;break}return e.next=5,(0,Ut.getAsyncIteratorFromData)(n);case 5:return s=e.sent,c=v(s,i),e.next=9,t.parseInBatches(c,i,u,t);case 9:return e.abrupt("return",e.sent);case 10:if(!t.parseStreamInBatches){e.next=17;break}return e.next=13,(0,Ut.getReadableStream)(n);case 13:if(!(f=e.sent)){e.next=17;break}return i.transforms&&console.warn("options.transforms not implemented for loaders that use `parseStreamInBatches`"),e.abrupt("return",t.parseStreamInBatches(f,i,u));case 17:return e.next=19,l();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){var r,n=e,a=s(t.transforms||[]);try{for(a.s();!(r=a.n()).done;){var o=r.value;n=(0,tt.makeTransformIterator)(n,o,t)}}catch(e){a.e(e)}finally{a.f()}return n}})),Ht=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e,t,r){return a.apply(this,arguments)};var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t,n,a){var o,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||(0,Pt.isLoaderObject)(n)||(a=n,n=null),o=(0,Ot.getFetchFunction)(a||{}),i=t,"string"!=typeof t){e.next=9;break}return e.next=6,o(t);case 6:i=e.sent,e.next=10;break;case 9:t=null;case 10:if(!(0,ot.isBlob)(t)){e.next=15;break}return e.next=13,o(t);case 13:i=e.sent,t=null;case 15:return e.next=17,(0,Gt.parse)(i,n,a);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Zt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadInBatches=function(e,t,r){Array.isArray(t)||(0,Pt.isLoaderObject)(t)||(r=t,t=null);var n=(0,Ot.getFetchFunction)(r||{});if(!Array.isArray(e))return a(e,t,r,n);return e.map((function(e){return a(e,t,r,n)}))};var r=j(C),n=j(nt);function a(e,t,r,n){return o.apply(this,arguments)}function o(){return(o=(0,n.default)(r.default.mark((function e(t,n,a,o){var i,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=8;break}return i=t,e.next=4,o(i);case 4:return u=e.sent,e.next=7,(0,Xt.parseInBatches)(u,n,a);case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,(0,Xt.parseInBatches)(t,n,a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Kt=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encode=i,t.encodeSync=function(e,t,r,n){if(t.encodeSync)return t.encodeSync(e,r);throw new Error("Writer could not synchronously encode data")},t.encodeText=function(e,t,r,n){return s.apply(this,arguments)},t.encodeInBatches=c,t.encodeURLtoURL=f;var r=j(C),n=j(nt),a=j(Bt);function o(e){return"/tmp/".concat(e)}function i(e,t,r,n){return u.apply(this,arguments)}function u(){return(u=(0,n.default)(r.default.mark((function e(t,n,i,u){var s,l,p,d,h,y,v,b,g,m,w,x,O;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.encode){e.next=4;break}return e.next=3,n.encode(t,i);case 3:return e.abrupt("return",e.sent);case 4:if(!n.encodeSync){e.next=6;break}return e.abrupt("return",n.encodeSync(t,i));case 6:if(!n.encodeText){e.next=12;break}return e.t0=new TextEncoder,e.next=10,n.encodeText(t,i);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.encode.call(e.t0,e.t1));case 12:if(!n.encodeInBatches){e.next=51;break}s=c(t,n,i),l=[],p=!0,d=!1,e.prev=17,y=(0,a.default)(s);case 19:return e.next=21,y.next();case 21:return v=e.sent,p=v.done,e.next=25,v.value;case 25:if(b=e.sent,p){e.next=32;break}g=b,l.push(g);case 29:p=!0,e.next=19;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e.catch(17),d=!0,h=e.t2;case 38:if(e.prev=38,e.prev=39,p||null==y.return){e.next=43;break}return e.next=43,y.return();case 43:if(e.prev=43,!d){e.next=46;break}throw h;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return e.next=50,tt.concatenateArrayBuffers.apply(void 0,l);case 50:return e.abrupt("return",e.sent);case 51:if(tt.isBrowser||!n.encodeURLtoURL){e.next=63;break}return m=o("input"),e.next=55,(0,bt.writeFile)(m,t);case 55:return w=o("output"),e.next=58,f(m,w,n,i);case 58:return x=e.sent,e.next=61,(0,ft.fetchFile)(x);case 61:return O=e.sent,e.abrupt("return",O.arrayBuffer());case 63:throw new Error("Writer could not encode data");case 64:case"end":return e.stop()}}),e,null,[[17,34,38,48],[39,,43,47]])})))).apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t,n,a,o){var u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.text||!n.encodeText){e.next=4;break}return e.next=3,n.encodeText(t,a);case 3:return e.abrupt("return",e.sent);case 4:if(!n.text||!n.encode&&!n.encodeInBatches){e.next=9;break}return e.next=7,i(t,n,a);case 7:return u=e.sent,e.abrupt("return",(new TextDecoder).decode(u));case 9:throw new Error("Writer could not encode data as text");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,r,n){if(t.encodeInBatches){var a=function(e){return[{table:e,start:0,end:e.length}]}(e);return t.encodeInBatches(a,r)}throw new Error("Writer could not encode data in batches")}function f(e,t,r,n){return l.apply(this,arguments)}function l(){return(l=(0,n.default)(r.default.mark((function e(t,n,a,o){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,tt.resolvePath)(t),n=(0,tt.resolvePath)(n),!tt.isBrowser&&a.encodeURLtoURL){e.next=4;break}throw new Error;case 4:return e.next=6,a.encodeURLtoURL(t,n,o);case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),er=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.save=function(e,t,r,n){var a=(0,Kt.encode)(e,r,n,t);return(0,bt.writeFile)(t,a)},t.saveSync=function(e,t,r,n){var a=(0,Kt.encodeSync)(e,r,n,t);return(0,bt.writeFileSync)(t,a)}})),tr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NullLoader=void 0;var r,n,a=j(C),o=j(nt),i=j(Lt),u=j(At),s=j(Bt),c=j(Jt),f={id:"image",name:"Images",version:"2.3.12",mimeTypes:["application/x.empty"],extensions:["null"],parse:(n=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),parseSync:function(e,t){return e},parseInBatches:(r=(0,o.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield((0,c.default)((0,s.default)(t),u.default),"t0",1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)}),tests:[function(){return!1}],options:{}};t.NullLoader=f})),rr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return a.apply(this,arguments)};var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t,n){var a,i,u,s,c,f,l=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:function(){},i=l.length>3&&void 0!==l[3]?l[3]:function(){},e.next=4,t;case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return",t);case 7:if(u=t.body){e.next=10;break}return e.abrupt("return",t);case 10:if(s=t.headers.get("content-length"),c=s&&parseInt(s,10),s>0){e.next=14;break}return e.abrupt("return",t);case 14:if("undefined"!=typeof ReadableStream&&u.getReader){e.next=16;break}return e.abrupt("return",t);case 16:return f=new ReadableStream({start:function(e){o(e,u.getReader(),0,c,n,a,i)}}),e.abrupt("return",new Response(f));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e,t,r,n,a,o,u){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark((function e(t,n,a,i,u,s,c){var f,l,p,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.read();case 3:if(f=e.sent,l=f.done,p=f.value,!l){e.next=10;break}return s(),t.close(),e.abrupt("return");case 10:return a+=p.byteLength,d=Math.round(a/i*100),u(d,{loadedBytes:a,totalBytes:i}),t.enqueue(p),e.next=16,o(t,n,a,i,u,s,c);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),t.error(e.t0),c(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}})),nr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=j(C),n=j(nt),a=j(gt),o=j(wt),i=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this._fetch=r.fetch||fetch,this.files={};for(var n=0;n<t.length;++n){var o=t[n];this.files[o.name]=o}this.fetch=this.fetch.bind(this)}var t,i,s,c,f,l,p;return(0,o.default)(e,[{key:"fetch",value:(p=(0,n.default)(r.default.mark((function e(t){var n,a,o,i=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},!t.includes("://")){e.next=4;break}return a=n.fetch||this._fetch,e.abrupt("return",a(t,n));case 4:if(!this.files[t]){e.next=9;break}return o=new Response(this.files[t]),Object.defineProperty(o,"url",{value:t}),e.abrupt("return",o);case 9:return e.abrupt("return",new Response(t,{status:400,statusText:"NOT FOUND"}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"readdir",value:(l=(0,n.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=[],this.files)t.push(n);return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"stat",value:(f=(0,n.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.files[t]){e.next=3;break}throw new Error("No such file: ".concat(t));case 3:return e.abrupt("return",{size:a.size});case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"unlink",value:(c=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.files[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"open",value:(s=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.files[t]);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"read",value:(i=(0,n.default)(r.default.mark((function e(t,n){var a,o,i,s,c,f,l,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.buffer,o=void 0===a?null:a,n.offset,i=n.length,s=void 0===i?o.byteLength:i,c=n.position,f=void 0===c?null:c,l=t,e.next=4,u(l,f,f+s);case 4:return p=e.sent,e.abrupt("return",p);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"close",value:(t=(0,n.default)(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();function u(e,t,r){return s.apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t,n,a){var o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.slice(n,a),e.next=3,new Promise((function(e,t){var r=new FileReader;r.onload=function(t){return e(t.target&&t.target.result)},r.onerror=function(e){return t(e)},r.readAsArrayBuffer(o)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=i})),ar=k(P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return ft.fetchFile}}),Object.defineProperty(t,"readFileSync",{enumerable:!0,get:function(){return yt.readFileSync}}),Object.defineProperty(t,"writeFile",{enumerable:!0,get:function(){return bt.writeFile}}),Object.defineProperty(t,"writeFileSync",{enumerable:!0,get:function(){return bt.writeFileSync}}),Object.defineProperty(t,"setLoaderOptions",{enumerable:!0,get:function(){return kt.setLoaderOptions}}),Object.defineProperty(t,"registerLoaders",{enumerable:!0,get:function(){return jt.registerLoaders}}),Object.defineProperty(t,"_unregisterLoaders",{enumerable:!0,get:function(){return jt._unregisterLoaders}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return Gt.parse}}),Object.defineProperty(t,"parseSync",{enumerable:!0,get:function(){return $t.parseSync}}),Object.defineProperty(t,"parseInBatches",{enumerable:!0,get:function(){return Xt.parseInBatches}}),Object.defineProperty(t,"selectLoader",{enumerable:!0,get:function(){return Qt.selectLoader}}),Object.defineProperty(t,"selectLoaderSync",{enumerable:!0,get:function(){return Qt.selectLoaderSync}}),Object.defineProperty(t,"load",{enumerable:!0,get:function(){return Ht.load}}),Object.defineProperty(t,"loadInBatches",{enumerable:!0,get:function(){return Zt.loadInBatches}}),Object.defineProperty(t,"encode",{enumerable:!0,get:function(){return Kt.encode}}),Object.defineProperty(t,"encodeSync",{enumerable:!0,get:function(){return Kt.encodeSync}}),Object.defineProperty(t,"encodeInBatches",{enumerable:!0,get:function(){return Kt.encodeInBatches}}),Object.defineProperty(t,"encodeText",{enumerable:!0,get:function(){return Kt.encodeText}}),Object.defineProperty(t,"encodeURLtoURL",{enumerable:!0,get:function(){return Kt.encodeURLtoURL}}),Object.defineProperty(t,"save",{enumerable:!0,get:function(){return er.save}}),Object.defineProperty(t,"saveSync",{enumerable:!0,get:function(){return er.saveSync}}),Object.defineProperty(t,"makeIterator",{enumerable:!0,get:function(){return Rt.makeIterator}}),Object.defineProperty(t,"NullLoader",{enumerable:!0,get:function(){return tr.NullLoader}}),Object.defineProperty(t,"setPathPrefix",{enumerable:!0,get:function(){return tt.setPathPrefix}}),Object.defineProperty(t,"getPathPrefix",{enumerable:!0,get:function(){return tt.getPathPrefix}}),Object.defineProperty(t,"resolvePath",{enumerable:!0,get:function(){return tt.resolvePath}}),Object.defineProperty(t,"RequestScheduler",{enumerable:!0,get:function(){return tt.RequestScheduler}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return tt.isBrowser}}),Object.defineProperty(t,"isWorker",{enumerable:!0,get:function(){return tt.isWorker}}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return tt.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return tt.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return tt.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return tt.document}}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return tt.assert}}),Object.defineProperty(t,"forEach",{enumerable:!0,get:function(){return tt.forEach}}),Object.defineProperty(t,"concatenateChunksAsync",{enumerable:!0,get:function(){return tt.concatenateChunksAsync}}),Object.defineProperty(t,"makeTextDecoderIterator",{enumerable:!0,get:function(){return tt.makeTextDecoderIterator}}),Object.defineProperty(t,"makeTextEncoderIterator",{enumerable:!0,get:function(){return tt.makeTextEncoderIterator}}),Object.defineProperty(t,"makeLineIterator",{enumerable:!0,get:function(){return tt.makeLineIterator}}),Object.defineProperty(t,"makeNumberedLineIterator",{enumerable:!0,get:function(){return tt.makeNumberedLineIterator}}),Object.defineProperty(t,"_fetchProgress",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"_BrowserFileSystem",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"isPromise",{enumerable:!0,get:function(){return ot.isPromise}}),Object.defineProperty(t,"isIterable",{enumerable:!0,get:function(){return ot.isIterable}}),Object.defineProperty(t,"isAsyncIterable",{enumerable:!0,get:function(){return ot.isAsyncIterable}}),Object.defineProperty(t,"isIterator",{enumerable:!0,get:function(){return ot.isIterator}}),Object.defineProperty(t,"isResponse",{enumerable:!0,get:function(){return ot.isResponse}}),Object.defineProperty(t,"isReadableStream",{enumerable:!0,get:function(){return ot.isReadableStream}}),Object.defineProperty(t,"isWritableStream",{enumerable:!0,get:function(){return ot.isWritableStream}});var r=j(rr),n=j(nr)})));var or=function(e){if(Array.isArray(e))return e};var ir=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}};var ur=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var sr=function(e,t){return or(e)||ir(e,t)||Nt(e,t)||ur()};class cr{constructor(e=257){this.gridSize=e;const t=e-1;if(t&t-1)throw new Error(`Expected grid size to be 2^n+1, got ${e}.`);this.numTriangles=t*t*2-2,this.numParentTriangles=this.numTriangles-t*t,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(4*this.numTriangles);for(let e=0;e<this.numTriangles;e++){let r=e+2,n=0,a=0,o=0,i=0,u=0,s=0;for(1&r?o=i=u=t:n=a=s=t;(r>>=1)>1;){const e=n+o>>1,t=a+i>>1;1&r?(o=n,i=a,n=u,a=s):(n=o,a=i,o=u,i=s),u=e,s=t}const c=4*e;this.coords[c+0]=n,this.coords[c+1]=a,this.coords[c+2]=o,this.coords[c+3]=i}}createTile(e){return new fr(e,this)}}class fr{constructor(e,t){const r=t.gridSize;if(e.length!==r*r)throw new Error(`Expected terrain data of length ${r*r} (${r} x ${r}), got ${e.length}.`);this.terrain=e,this.martini=t,this.errors=new Float32Array(e.length),this.update()}update(){const{numTriangles:e,numParentTriangles:t,coords:r,gridSize:n}=this.martini,{terrain:a,errors:o}=this;for(let i=e-1;i>=0;i--){const e=4*i,u=r[e+0],s=r[e+1],c=r[e+2],f=r[e+3],l=u+c>>1,p=s+f>>1,d=l+p-s,h=p+u-l,y=(a[s*n+u]+a[f*n+c])/2,v=p*n+l,b=Math.abs(y-a[v]);if(o[v]=Math.max(o[v],b),i<t){const e=(s+h>>1)*n+(u+d>>1),t=(f+h>>1)*n+(c+d>>1);o[v]=Math.max(o[v],o[e],o[t])}}}getMesh(e=0){const{gridSize:t,indices:r}=this.martini,{errors:n}=this;let a=0,o=0;const i=t-1;function u(i,s,c,f,l,p){const d=i+c>>1,h=s+f>>1;Math.abs(i-l)+Math.abs(s-p)>1&&n[h*t+d]>e?(u(l,p,i,s,d,h),u(c,f,l,p,d,h)):(r[s*t+i]=r[s*t+i]||++a,r[f*t+c]=r[f*t+c]||++a,r[p*t+l]=r[p*t+l]||++a,o++)}r.fill(0),u(0,0,i,i,i,0),u(i,i,0,0,0,i);const s=new Uint16Array(2*a),c=new Uint32Array(3*o);let f=0;function l(a,o,i,u,p,d){const h=a+i>>1,y=o+u>>1;if(Math.abs(a-p)+Math.abs(o-d)>1&&n[y*t+h]>e)l(p,d,a,o,h,y),l(i,u,p,d,h,y);else{const e=r[o*t+a]-1,n=r[u*t+i]-1,l=r[d*t+p]-1;s[2*e]=a,s[2*e+1]=o,s[2*n]=i,s[2*n+1]=u,s[2*l]=p,s[2*l+1]=d,c[f++]=e,c[f++]=n,c[f++]=l}}return l(0,0,i,i,i,0),l(i,i,0,0,0,i),{vertices:s,triangles:c}}}var lr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return u.apply(this,arguments)};var r=j(C),n=j(nt),a=j(sr),o=j(cr);function i(e,t){if(null===e)return null;var r=t.meshMaxError,n=t.bounds,i=t.elevationDecoder,u=e.data,s=e.width,c=s+1,f=function(e,t,r){for(var n=r.rScaler,a=r.bScaler,o=r.gScaler,i=r.offset,u=t+1,s=new Float32Array(u*u),c=0,f=0;f<t;f++)for(var l=0;l<t;l++,c++){var p=4*c,d=e[p+0],h=e[p+1],y=e[p+2];s[c+f]=d*n+h*o+y*a+i}for(var v=u*(u-1),b=0;b<u-1;b++,v++)s[v]=s[v-u];for(var g=u-1,m=0;m<u;m++,g+=u)s[g]=s[g-1];return s}(u,s,i),l=new o.default(c).createTile(f).getMesh(r),p=l.vertices,d=l.triangles,h=function(e,t,r,n){for(var o=r+1,i=e.length/2,u=new Float32Array(3*i),s=new Float32Array(2*i),c=n||[0,0,r,r],f=(0,a.default)(c,4),l=f[0],p=f[1],d=f[2],h=f[3],y=(d-l)/r,v=(h-p)/r,b=0;b<i;b++){var g=e[2*b],m=e[2*b+1],w=m*o+g;u[3*b+0]=g*y+l,u[3*b+1]=-m*v+h,u[3*b+2]=t[w],s[2*b+0]=g/r,s[2*b+1]=m/r}return{POSITION:{value:u,size:3},TEXCOORD_0:{value:s,size:2}}}(p,f,s,n);return{loaderData:{header:{}},header:{vertexCount:d.length,boundingBox:(0,tt.getMeshBoundingBox)(h)},mode:4,indices:{value:d,size:1},attributes:h}}function u(){return(u=(0,n.default)(r.default.mark((function e(t,n,a){var o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.image=n.image||{},n.image.type="data",e.next=4,a.parse(t,n,n.baseUri);case 4:return o=e.sent,e.abrupt("return",i(o,n.terrain));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),pr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TerrainLoader=t.TerrainWorkerLoader=void 0;var r=j(pt),n=j(lr);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i={id:"terrain",name:"Terrain",version:"2.3.12",extensions:["png","pngraw"],mimeTypes:["image/png"],options:{terrain:{bounds:null,workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("2.3.12","/dist/terrain-loader.worker.js"),meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0}}}};t.TerrainWorkerLoader=i;var u=o(o({},i),{},{parse:n.default});t.TerrainLoader=u})),dr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var f=Object.assign({},c,t),l=new DataView(e),p=function(e){var t,o=0,i={},u=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw i}}}}(a);try{for(u.s();!(t=u.n()).done;){var s=(0,r.default)(t.value,2),c=s[0],f=s[1],l=8===f?e.getFloat64:e.getFloat32;i[c]=l.call(e,o,!0),o+=f}}catch(e){u.e(e)}finally{u.f()}return{header:i,headerEndPosition:o}}(l),d=p.header,h=p.headerEndPosition;if(f.maxDecodingStep<s.vertices)return{header:d};var y=function(e,t){var r=t,n=e.getUint32(r,!0),a=new Uint16Array(3*n);r+=Uint32Array.BYTES_PER_ELEMENT;for(var i=Uint16Array.BYTES_PER_ELEMENT,u=n*i,s=r,c=s+u,f=c+u,l=0,p=0,d=0,h=0;h<n;h++)l+=o(e.getUint16(s+i*h,!0)),p+=o(e.getUint16(c+i*h,!0)),d+=o(e.getUint16(f+i*h,!0)),a[h]=l,a[h+n]=p,a[h+2*n]=d;return{vertexData:a,vertexDataEndPosition:r+=3*u}}(l,h),v=y.vertexData,b=y.vertexDataEndPosition;if(f.maxDecodingStep<s.triangleIndices)return{header:d,vertexData:v};var g=function(e,t,r){var n=r,a=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%a!=0&&(n+=a-n%a);var o=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=3*o,s=i(e.buffer,n,u,a);return{triangleIndicesEndPosition:n+=u*a,triangleIndices:s}}(l,v,b),m=g.triangleIndices,w=g.triangleIndicesEndPosition;if(f.maxDecodingStep<s.edgeIndices)return{header:d,vertexData:v,triangleIndices:m};var x=function(e,t,r){var n=r,a=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,o=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=i(e.buffer,n,o,a,!1);n+=o*a;var s=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var c=i(e.buffer,n,s,a,!1);n+=s*a;var f=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var l=i(e.buffer,n,f,a,!1);n+=f*a;var p=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var d=i(e.buffer,n,p,a,!1);return{edgeIndicesEndPosition:n+=p*a,westIndices:u,southIndices:c,eastIndices:l,northIndices:d}}(l,v,w),O=x.westIndices,k=x.southIndices,P=x.eastIndices,j=x.northIndices,_=x.edgeIndicesEndPosition;if(f.maxDecodingStep<s.extensions)return{header:d,vertexData:v,triangleIndices:m,westIndices:O,northIndices:j,eastIndices:P,southIndices:k};var S=function(e,t){var r={};if(e.byteLength<=t)return{extensions:r,extensionsEndPosition:t};var n=t;for(;n<e.byteLength;){var a=e.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;var o=e.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var i=new DataView(e.buffer,n,o);switch(a){case 1:r.vertexNormals=(s=i,new Uint8Array(s.buffer,s.byteOffset,s.byteLength));break;case 2:r.waterMask=u(i)}n+=o}var s;return{extensions:r,extensionsEndPosition:n}}(l,_).extensions;return{header:d,vertexData:v,triangleIndices:m,westIndices:O,northIndices:j,eastIndices:P,southIndices:k,extensions:S}},t.DECODING_STEPS=void 0;var r=j(sr);function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function o(e){return e>>1^-(1&e)}function i(e,t,r,n){var a,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(a=2===n?new Uint16Array(e,t,r):new Uint32Array(e,t,r),!o)return a;for(var i=0,u=0;u<a.length;++u){var s=a[u];a[u]=i-s,0===s&&++i}return a}function u(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}var s={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4};t.DECODING_STEPS=s;var c={maxDecodingStep:s.extensions}})),hr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(e,t){if(!e)return null;var a=t.bounds,o=(0,n.default)(e,n.DECODING_STEPS.triangleIndices),i=o.header,u=o.vertexData,s=o.triangleIndices,c=function(e,t,n){for(var a=t.minHeight,o=t.maxHeight,i=n||[0,0,1,1],u=(0,r.default)(i,4),s=u[0],c=u[1],f=u[2],l=u[3],p=f-s,d=l-c,h=o-a,y=e.length/3,v=new Float32Array(3*y),b=new Float32Array(2*y),g=0;g<y;g++){var m=e[g]/32767,w=e[g+y]/32767,x=e[g+2*y]/32767;v[3*g+0]=m*p+s,v[3*g+1]=w*d+c,v[3*g+2]=x*h+a,b[2*g+0]=m,b[2*g+1]=w}return{POSITION:{value:v,size:3},TEXCOORD_0:{value:b,size:2}}}(u,i,a);return{loaderData:{header:{}},header:{vertexCount:s.length,boundingBox:(0,tt.getMeshBoundingBox)(c)},mode:4,indices:{value:s,size:1},attributes:c}}(e,t["quantized-mesh"])};var r=j(sr),n=lt(dr)})),yr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuantizedMeshLoader=t.QuantizedMeshWorkerLoader=void 0;var r=j(C),n=j(nt),a=j(pt),o=j(hr);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={id:"quantized-mesh",name:"Quantized Mesh",version:"2.3.12",extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("2.3.12","/dist/quantized-mesh-loader.worker.js"),bounds:[0,0,1,1]}}};t.QuantizedMeshWorkerLoader=s;var c,f=u(u({},s),{},{parseSync:o.default,parse:(c=(0,n.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.default)(t,n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})});t.QuantizedMeshLoader=f})),vr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseNPY=function(e,t){if(!e)return null;var r=function(e){var t,r=e.getUint8(6),n=8;r>=2?(t=e.getUint32(8,!0),n+=4):(t=e.getUint16(8,!0),n+=2);var a=new TextDecoder(r<=2?"latin1":"utf-8"),o=new Uint8Array(e.buffer,n,t),i=a.decode(o);return n+=t,{header:JSON.parse(i.replace(/'/g,'"').replace("False","false").replace("(","[").replace(/,*\),*/g,"]")),headerEndOffset:n}}(new DataView(e)),o=r.header,i=r.headerEndOffset,u=o.descr,s=a[u.slice(1,3)];if(!s)return console.warn("Decoding of npy dtype not implemented: ".concat(u)),null;var c=o.shape.reduce((function(e,t){return e*t}))*s.BYTES_PER_ELEMENT,f=new s(e.slice(i,i+c));(">"===u[0]&&n||"<"===u[0]&&!n)&&console.warn("Data is wrong endianness, byte swapping not yet implemented.");return{data:f,header:o}};var r,n=(r=new Uint32Array([305419896]),!(18===new Uint8Array(r.buffer,r.byteOffset,r.byteLength)[0])),a={u1:Uint8Array,i1:Int8Array,u2:Uint16Array,i2:Int16Array,u4:Uint32Array,i4:Int32Array,f4:Float32Array,f8:Float64Array}})),br=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NPYLoader=t.NPYWorkerLoader=void 0;var r=j(C),n=j(nt),a=j(pt);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u={id:"npy",name:"NPY",version:"2.3.12",extensions:["npy"],mimeTypes:[],tests:[new Uint8Array([147,78,85,77,80,89]).buffer],options:{npy:{workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("2.3.12","/dist/npy-loader.worker.js")}}};t.NPYWorkerLoader=u;var s,c=i(i({},u),{},{parseSync:vr.parseNPY,parse:(s=(0,n.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,vr.parseNPY)(t,n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)})});t.NPYLoader=c})),gr=k(P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"TerrainLoader",{enumerable:!0,get:function(){return pr.TerrainLoader}}),Object.defineProperty(t,"TerrainWorkerLoader",{enumerable:!0,get:function(){return pr.TerrainWorkerLoader}}),Object.defineProperty(t,"QuantizedMeshLoader",{enumerable:!0,get:function(){return yr.QuantizedMeshLoader}}),Object.defineProperty(t,"QuantizedMeshWorkerLoader",{enumerable:!0,get:function(){return yr.QuantizedMeshWorkerLoader}}),Object.defineProperty(t,"_NPYLoader",{enumerable:!0,get:function(){return br.NPYLoader}}),Object.defineProperty(t,"_NPYWorkerLoader",{enumerable:!0,get:function(){return br.NPYWorkerLoader}})}))),mr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)throw new Error(t)}})),wr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.nodeVersion=t.isWorker=t.isBrowser=t.document=t.global=t.window=t.self=void 0;var r=j(at),n={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==O&&O,document:"undefined"!=typeof document&&document},a=n.self||n.window||n.global;t.self=a;var o=n.window||n.self||n.global;t.window=o;var i=n.global||n.self||n.window;t.global=i;var u=n.document||{};t.document=u;var s="object"!==("undefined"==typeof process?"undefined":(0,r.default)(process))||"[object process]"!==String(process)||process.browser;t.isBrowser=s;var c="function"==typeof importScripts;t.isWorker=c;var f="undefined"!=typeof process&&process.version&&process.version.match(/v([0-9]*)/),l=f&&parseFloat(f[1])||0;t.nodeVersion=l})),xr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isImageTypeSupported=function(e){switch(e){case"auto":return a||n||i;case"imagebitmap":return a;case"image":return n;case"data":return i;case"html":return n;case"ndarray":return i;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}},t.getDefaultImageType=function(){if(a)return"imagebitmap";if(n)return"image";if(i)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")};var r=wr.global._parseImageNode,n="undefined"!=typeof Image,a="undefined"!=typeof ImageBitmap,o=Boolean(r),i=!!wr.isBrowser||o})),Or=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isImage=function(e){return Boolean(o(e))},t.deleteImage=function(e){switch(a(e)){case"imagebitmap":e.close()}},t.getImageType=a,t.getImageSize=t.getImageData=function(e){switch(a(e)){case"data":return e;case"image":case"imagebitmap":var t=document.createElement("canvas"),r=t.getContext("2d");if(r)return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:return(0,n.default)(!1)}};var r=j(at),n=j(mr);function a(e){var t=o(e);if(!t)throw new Error("Not an image");return t}function o(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"===(0,r.default)(e)&&e.data&&e.width&&e.height?"data":null}})),kr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isSVG=a,t.getBlobOrSVGDataUrl=function(e,t){if(a(t)){var r=(new TextDecoder).decode(e);return"data:image/svg+xml;base64,".concat(btoa(r))}return o(e,t)},t.getBlob=o;var r=/^data:image\/svg\+xml/,n=/\.svg((\?|#).*)?$/;function a(e){return e&&(r.test(e)||n.test(e))}function o(e,t){if(a(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}})),Pr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return a.apply(this,arguments)},t.loadToImage=o;var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t,n,a){var i,u,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,kr.getBlobOrSVGDataUrl)(t,a),u=self.URL||self.webkitURL,s="string"!=typeof i&&u.createObjectURL(i),e.prev=3,e.next=6,o(s||i,n);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,s&&u.revokeObjectURL(s),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}function o(e,t){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark((function e(t,n){var a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new Image).src=t,!(n.image&&n.image.decode&&a.decode)){e.next=6;break}return e.next=5,a.decode();case 5:return e.abrupt("return",a);case 6:return e.next=8,new Promise((function(e,r){try{a.onload=function(){return e(a)},a.onerror=function(e){return r(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(e){r(e)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),jr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return u.apply(this,arguments)};var r=j(C),n=j(nt),a=j(Pr),o={},i=!0;function u(){return(u=(0,n.default)(r.default.mark((function e(t,n,o){var i,u,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,kr.isSVG)(o)){e.next=7;break}return e.next=3,(0,a.default)(t,n,o);case 3:u=e.sent,i=u,e.next=8;break;case 7:i=(0,kr.getBlob)(t,o);case 8:return c=n&&n.imagebitmap,e.next=11,s(i,c);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return(c=(0,n.default)(r.default.mark((function e(t){var n,a=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f(n=a.length>1&&void 0!==a[1]?a[1]:null)&&i||(n=null),!n){e.next=13;break}return e.prev=3,e.next=6,createImageBitmap(t,n);case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0),i=!1;case 13:return e.next=15,createImageBitmap(t);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function f(e){for(var t in e||o)return!1;return!0}})),_r=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getBinaryImageMetadata=function(e){var t=n(e);return function(e){var t=n(e);if(!(t.byteLength>=24&&2303741511===t.getUint32(0,!1)))return null;return{mimeType:"image/png",width:t.getUint32(16,!1),height:t.getUint32(20,!1)}}(t)||function(e){var t=n(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,!1)&&255===t.getUint8(2)))return null;var r=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var r=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:r}}(),a=r.tableMarkers,o=r.sofMarkers,i=2;for(;i+9<t.byteLength;){var u=t.getUint16(i,!1);if(o.has(u))return{mimeType:"image/jpeg",height:t.getUint16(i+5,!1),width:t.getUint16(i+7,!1)};if(!a.has(u))return null;i+=2,i+=t.getUint16(i,!1)}return null}(t)||function(e){var t=n(e);if(!(t.byteLength>=10&&1195984440===t.getUint32(0,!1)))return null;return{mimeType:"image/gif",width:t.getUint16(6,!0),height:t.getUint16(8,!0)}}(t)||r(t)},t.getBmpMetadata=r;function r(e){var t=n(e);return t.byteLength>=14&&16973===t.getUint16(0,!1)&&t.getUint32(2,!0)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,!0),height:t.getUint32(22,!0)}:null}function n(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}})),Sr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=((0,_r.getBinaryImageMetadata)(e)||{}).mimeType,a=wr.global._parseImageNode;return(0,r.default)(a),a(e,n,t)};var r=j(mr)})),Er=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return s.apply(this,arguments)};var r=j(C),n=j(nt),a=j(mr),o=j(Pr),i=j(jr),u=j(Sr);function s(){return(s=(0,n.default)(r.default.mark((function e(t,n,s){var f,l,p,d,h;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f=(n=n||{}).image||{},l=f.type||"auto",p=(s||{}).url,d=c(l),e.t0=d,e.next="imagebitmap"===e.t0?8:"image"===e.t0?12:"data"===e.t0?16:20;break;case 8:return e.next=10,(0,i.default)(t,n,p);case 10:return h=e.sent,e.abrupt("break",21);case 12:return e.next=14,(0,o.default)(t,n,p);case 14:return h=e.sent,e.abrupt("break",21);case 16:return e.next=18,(0,u.default)(t,n);case 18:return h=e.sent,e.abrupt("break",21);case 20:(0,a.default)(!1);case 21:return"data"===l&&(h=(0,Or.getImageData)(h)),e.abrupt("return",h);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){switch(e){case"auto":case"data":return(0,xr.getDefaultImageType)();default:return(0,xr.isImageTypeSupported)(e),e}}})),Ar=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={id:"image",name:"Images",version:"2.3.12",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:j(Er).default,tests:[function(e){return Boolean((0,_r.getBinaryImageMetadata)(new DataView(e)))}],options:{image:{type:"auto",decode:!0}}};t.default=r})),Tr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeImage=function(e,t){return o.apply(this,arguments)};var r=j(C),n=j(nt),a=wr.global._encodeImageNode;function o(){return(o=(0,n.default)(r.default.mark((function e(t,n){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=n||{}).image=n.image||{},e.abrupt("return",a?a(t,{type:n.image.mimeType}):u(t,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=!0;function u(e,t){return s.apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t,n){var a,o,u,s,f,l,p,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.image,o=a.mimeType,u=a.jpegQuality,s=(0,Or.getImageSize)(t),f=s.width,l=s.height,(p=document.createElement("canvas")).width=f,p.height=l,c(t,p),e.next=8,new Promise((function(e,t){if(u&&i)try{return void p.toBlob(e,o,u)}catch(e){i=!1}p.toBlob(e,o)}));case 8:return d=e.sent,e.next=11,d.arrayBuffer();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===r&&0===n&&"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t.getContext("bitmaprenderer");if(a)return a.transferFromImageBitmap(e),t}var o=t.getContext("2d");if(e.data){var i=new Uint8ClampedArray(e.data),u=new ImageData(i,e.width,e.height);return o.putImageData(u,0,0),t}return o.drawImage(e,0,0),t}})),Ir=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"Images",extensions:["jpeg"],options:{image:{mimeType:"image/png",jpegQuality:null}},encode:Tr.encodeImage};t.default=r})),Lr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.generateUrl=function(e,t,r){var a=e;"function"==typeof e&&(a=e(o(o({},t),r)));(0,n.default)("string"==typeof a);var i=t.baseUrl;i&&(a="/"===i[i.length-1]?"".concat(i).concat(a):"".concat(i,"/").concat(a));return(0,tt.resolvePath)(a)};var r=j(pt),n=j(mr);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}})),Mr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.asyncDeepMap=function(e,t){return i.apply(this,arguments)},t.mapSubtree=u;var r=j(C),n=j(nt),a=j(at),o=function(e){return e&&"object"===(0,a.default)(e)};function i(){return(i=(0,n.default)(r.default.mark((function e(t,n){var a,o=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,u(t,n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,r){return s.apply(this,arguments)}function s(){return(s=(0,n.default)(r.default.mark((function e(t,n,a){var i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=4;break}return e.next=3,l(t,n,a);case 3:return e.abrupt("return",e.sent);case 4:if(!o(t)){e.next=8;break}return e.next=7,c(t,n,a);case 7:return e.abrupt("return",e.sent);case 8:return i=t,e.next=11,n(i,a);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,r){return f.apply(this,arguments)}function f(){return(f=(0,n.default)(r.default.mark((function e(t,n,a){var o,i,s,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in o=[],i={},s=function(e){var r=u(t[e],n,a).then((function(t){i[e]=t}));o.push(r)},t)s(c);return e.next=6,Promise.all(o);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return p.apply(this,arguments)}function p(){return(p=(0,n.default)(r.default.mark((function e(t,n){var a,o,i=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},o=t.map((function(e){return u(e,n,a)})),e.next=4,Promise.all(o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Br=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.deepLoad=function(e,t,r){return a.apply(this,arguments)},t.shallowLoad=o;var r=j(C),n=j(nt);function a(){return(a=(0,n.default)(r.default.mark((function e(t,n,a){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Mr.asyncDeepMap)(t,(function(e){return o(e,n,a)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e,t,r){return i.apply(this,arguments)}function i(){return(i=(0,n.default)(r.default.mark((function e(t,n,a){var o,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a.fetch);case 2:return o=e.sent,e.next=5,o.arrayBuffer();case 5:return i=e.sent,e.next=8,n(i,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Dr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=function(e){return c.apply(this,arguments)},t.getImageUrls=f,t.getMipLevels=h;var r=j(pt),n=j(C),a=j(nt),o=j(mr),i=j(Er);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){return(c=(0,a.default)(n.default.mark((function e(t){var r,a,o=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,f(t,r);case 3:return a=e.sent,e.next=6,(0,Br.deepLoad)(a,i.default,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t){return l.apply(this,arguments)}function l(){return(l=(0,a.default)(n.default.mark((function e(t,r){var a,o,i=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:{},0===(o=r&&r.image&&r.image.mipLevels||0)){e.next=8;break}return e.next=5,p(t,o,r,a);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=(0,Lr.generateUrl)(t,r,a);case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t,r,n){return d.apply(this,arguments)}function d(){return(d=(0,a.default)(n.default.mark((function e(t,r,a,u){var c,f,l,p,d,y,v,b;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],"auto"!==r){e.next=9;break}return f=(0,Lr.generateUrl)(t,a,s(s({},u),{},{lod:0})),e.next=5,(0,Br.shallowLoad)(f,i.default,a);case 5:l=e.sent,p=(0,Or.getImageSize)(l),d=p.width,y=p.height,r=h({width:d,height:y}),c.push(f);case 9:for((0,o.default)(r>0),v=c.length;v<r;++v)b=(0,Lr.generateUrl)(t,a,s(s({},u),{},{lod:v})),c.push(b);return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){var t=e.width,r=e.height;return 1+Math.floor(Math.log2(Math.max(t,r)))}})),Rr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.loadImageArray=function(e,t){return o.apply(this,arguments)},t.getImageArrayUrls=i;var r=j(C),n=j(nt),a=j(Er);function o(){return(o=(0,n.default)(r.default.mark((function e(t,n){var o,u,s=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,i(t,n,o);case 3:return u=e.sent,e.next=6,(0,Br.deepLoad)(u,a.default,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e,t){return u.apply(this,arguments)}function u(){return(u=(0,n.default)(r.default.mark((function e(t,n){var a,o,i,u,s=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=s.length>2&&void 0!==s[2]?s[2]:{},o=[],i=0;i<t;i++)u=(0,Dr.getImageUrls)(n,a,{index:i}),o.push(u);return e.next=5,Promise.all(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Ur=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getImageCubeUrls=c,t.loadImageCube=function(e){return l.apply(this,arguments)};var r=j(C),n=j(pt),a=j(nt),o=j(Er);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=[{face:34069,direction:"right",axis:"x",sign:"positive"},{face:34070,direction:"left",axis:"x",sign:"negative"},{face:34071,direction:"top",axis:"y",sign:"positive"},{face:34072,direction:"bottom",axis:"y",sign:"negative"},{face:34073,direction:"front",axis:"z",sign:"positive"},{face:34074,direction:"back",axis:"z",sign:"negative"}];function c(e,t){return f.apply(this,arguments)}function f(){return(f=(0,a.default)(r.default.mark((function e(t,n){var a,o,i,c,f;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(f in a={},o=[],i=0,c=function(e){var r=s[i],c=(0,Dr.getImageUrls)(t,n,u(u({},r),{},{index:i++})).then((function(t){a[e]=t}));o.push(c)},s)c(f);return e.next=7,Promise.all(o);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,a.default)(r.default.mark((function e(t){var n,a,i=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,c(t,n);case 3:return a=e.sent,e.next=6,(0,Br.deepLoad)(a,o.default,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),Cr=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBinaryImage=function(e,t){var r=(0,_r.getBinaryImageMetadata)(e);if(t)return Boolean(r&&r.mimeType===t);return Boolean(r)},t.getBinaryImageMIMEType=function(e){var t=(0,_r.getBinaryImageMetadata)(e);return t?t.mimeType:null},t.getBinaryImageSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,_r.getBinaryImageMetadata)(e);if(r)return{width:r.width,height:r.height};throw t=t||"unknown",new Error("invalid image data for type: ".concat(t))}})),Fr=k(P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedImageType=function(){return(0,xr.getDefaultImageType)()},Object.defineProperty(t,"ImageLoader",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"HTMLImageLoader",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"ImageWriter",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"getBinaryImageMetadata",{enumerable:!0,get:function(){return _r.getBinaryImageMetadata}}),Object.defineProperty(t,"isImageTypeSupported",{enumerable:!0,get:function(){return xr.isImageTypeSupported}}),Object.defineProperty(t,"getDefaultImageType",{enumerable:!0,get:function(){return xr.getDefaultImageType}}),Object.defineProperty(t,"isImage",{enumerable:!0,get:function(){return Or.isImage}}),Object.defineProperty(t,"getImageType",{enumerable:!0,get:function(){return Or.getImageType}}),Object.defineProperty(t,"getImageSize",{enumerable:!0,get:function(){return Or.getImageSize}}),Object.defineProperty(t,"getImageData",{enumerable:!0,get:function(){return Or.getImageData}}),Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return Dr.loadImage}}),Object.defineProperty(t,"loadImageArray",{enumerable:!0,get:function(){return Rr.loadImageArray}}),Object.defineProperty(t,"loadImageCube",{enumerable:!0,get:function(){return Ur.loadImageCube}}),Object.defineProperty(t,"isBinaryImage",{enumerable:!0,get:function(){return Cr.isBinaryImage}}),Object.defineProperty(t,"getBinaryImageMIMEType",{enumerable:!0,get:function(){return Cr.getBinaryImageMIMEType}}),Object.defineProperty(t,"getBinaryImageSize",{enumerable:!0,get:function(){return Cr.getBinaryImageSize}});var r=j(Ar),n=j(Ir)}))),zr=1;"undefined"!=typeof window&&(zr=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),ar.registerLoaders([[Fr.ImageLoader,{imagebitmap:{premultiplyAlpha:"none"}}]]);var Nr={registerEvents:!0,renderer:"gl",glOptions:{alpha:!0,depth:!1,antialias:!0,stencil:!0},forceRenderOnMoving:!0,forceRenderOnZooming:!0,elevationDecoder:{rScaler:6553.6,gScaler:25.6,bScaler:.1,offset:-1e4},meshMaxError:4,workerUrl:null},Wr=function(e){function t(t,r){return void 0===r&&(r={}),e.call(this,t,Object.assign({},Nr,r))||this}return v(t,e),t.prototype.rerender=function(){var e=this.getRenderer();e&&e.setToRedraw()},t.prototype.getMap=function(){return e.prototype.getMap.call(this)},t.prototype.getTileSize=function(){return e.prototype.getTileSize.call(this)},t}(r.TileLayer),qr=new Float32Array([0,0,0]),Yr=new Float32Array(16),Vr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.isDrawable=function(){return!0},t.prototype._drawTiles=function(t,r,n,a){e.prototype._drawTiles.call(this,t,r,n,a),this.regl&&this.regl._refresh()},t.prototype.loadTile=function(e){var t=this,r=this.layer.options,n=r.terrainTiles,a=r.elevationDecoder,o=r.meshMaxError,i=r.workerUrl;if(n){var u=function(e,t){if(!e||!e.length)return null;Array.isArray(e)&&(e=e[Math.abs(t.x+t.y)%e.length]);var r=t.x,n=t.y,a=t.z;return e.replace("{x}",String(r)).replace("{y}",String(n)).replace("{z}",String(a)).replace("{-y}",String(Math.pow(2,a)-n-1))}(n,{x:e.x,y:e.y,z:e.z});return Promise.all([this.loadTerrain({elevationData:u,bounds:[0,0,1,1],elevationDecoder:a,meshMaxError:o,workerUrl:i}),ar.load(e.url,[Fr.ImageLoader])]).then((function(r){var n=r[0],a=r[1];e.terrainData=n,t.onTileLoad(a,e)})).catch((function(r){console.error(r),t.onTileError("",e)})),{}}return console.warn("必须指定真实渲染图层: options.terrainTiles"),{}},t.prototype.onTileLoad=function(t,r){return e.prototype.onTileLoad.call(this,t,r)},t.prototype.loadTerrain=function(e){var t=e.elevationData,r=e.bounds,n=e.elevationDecoder,a=e.meshMaxError,o=e.workerUrl;if(!t)return null;var i={terrain:{bounds:r,meshMaxError:a,elevationDecoder:n}};return null!==o&&(i.terrain.workerUrl=o),ar.load(t,gr.TerrainLoader,i)},t.prototype.drawTile=function(e,t){var r=this.getMap();if(e&&r&&t&&this.regl&&this.command){var n=e._glScale=e._glScale||r.getGLScale(e.z),a=e.size[0];e.size[1],e.cache,e.u_tile||(e.u_tile=this.regl.texture({data:t,wrapS:"clamp",wrapT:"clamp",min:"linear",mag:"linear",mipmap:!0}));var o=e.point,i=o.x*n,u=o.y*n;qr[0]=i||0,qr[1]=u||0;var s=this.layer.options,c=s.extrudeScale,f=s.opacity,l=this.getTileOpacity(t),p=this.getMap().projViewMatrix;if(!e.planeBuffer){var d=e.terrainData,h=d.attributes,y=d.indices;e.planeBuffer={elements:this.regl.elements({data:y.value,primitive:"triangles",type:"uint32"}),position:{buffer:this.regl.buffer({data:h.POSITION.value,type:"float"}),size:h.POSITION.size},uvs:{buffer:this.regl.buffer(h.TEXCOORD_0.value),size:h.TEXCOORD_0.size}}}var v=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(Yr);!function(e,t,r){var n,a,o,i,u,s,c,f,l,p,d,h,y=r[0],v=r[1],b=r[2];t===e?(e[12]=t[0]*y+t[4]*v+t[8]*b+t[12],e[13]=t[1]*y+t[5]*v+t[9]*b+t[13],e[14]=t[2]*y+t[6]*v+t[10]*b+t[14],e[15]=t[3]*y+t[7]*v+t[11]*b+t[15]):(n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],p=t[9],d=t[10],h=t[11],e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=s,e[6]=c,e[7]=f,e[8]=l,e[9]=p,e[10]=d,e[11]=h,e[12]=n*y+u*v+l*b+t[12],e[13]=a*y+s*v+p*b+t[13],e[14]=o*y+c*v+d*b+t[14],e[15]=i*y+f*v+h*b+t[15])}(v,v,qr),function(e,t,r){var n=r[0],a=r[1],o=r[2];e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(v,v,[n,n,1]),function(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],p=t[9],d=t[10],h=t[11],y=t[12],v=t[13],b=t[14],g=t[15],m=r[0],w=r[1],x=r[2],O=r[3];e[0]=m*n+w*u+x*l+O*y,e[1]=m*a+w*s+x*p+O*v,e[2]=m*o+w*c+x*d+O*b,e[3]=m*i+w*f+x*h+O*g,m=r[4],w=r[5],x=r[6],O=r[7],e[4]=m*n+w*u+x*l+O*y,e[5]=m*a+w*s+x*p+O*v,e[6]=m*o+w*c+x*d+O*b,e[7]=m*i+w*f+x*h+O*g,m=r[8],w=r[9],x=r[10],O=r[11],e[8]=m*n+w*u+x*l+O*y,e[9]=m*a+w*s+x*p+O*v,e[10]=m*o+w*c+x*d+O*b,e[11]=m*i+w*f+x*h+O*g,m=r[12],w=r[13],x=r[14],O=r[15],e[12]=m*n+w*u+x*l+O*y,e[13]=m*a+w*s+x*p+O*v,e[14]=m*o+w*c+x*d+O*b,e[15]=m*i+w*f+x*h+O*g}(v,p,v),this.command({u_matrix:v,u_tile:e.u_tile,u_tile_size:a,zoom:e.z,elements:e.planeBuffer.elements,a_pos:e.planeBuffer.position,a_texCoord:e.planeBuffer.uvs,u_opacity:void 0!==f?f:1,u_extrude_scale:void 0!==c?c:1,canvasSize:[this.gl.canvas.width,this.gl.canvas.height]}),l<1?this.setToRedraw():this.setCanvasUpdated()}},t.prototype.getCanvasImage=function(){if(!this.regl||!this.canvas2)return e.prototype.getCanvasImage.call(this);var t=e.prototype.getCanvasImage.call(this);return t&&(t.image=this.canvas2),t},t.prototype.onCanvasCreate=function(){var e,t;(null===(e=this.canvas)||void 0===e?void 0:e.gl)&&(null===(t=this.canvas)||void 0===t?void 0:t.gl.wrap)||(this.canvas2=r.Canvas.createCanvas(this.canvas.width,this.canvas.height))},t.prototype.createContext=function(){var t,r,n,a,o,i;if(e.prototype.createContext.call(this),(null===(t=this.canvas)||void 0===t?void 0:t.gl)&&(null===(r=this.canvas)||void 0===r?void 0:r.gl.wrap))this.gl=null===(n=this.canvas)||void 0===n?void 0:n.gl.wrap();else{var u=this.layer,s=(null===(a=u.options)||void 0===a?void 0:a.glOptions)||{alpha:!0,depth:!0,antialias:!0,stencil:!0};if(s.preserveDrawingBuffer=!0,(null===(o=u.options)||void 0===o?void 0:o.customCreateGLContext)?this.gl=this.gl||(null===(i=u.options)||void 0===i?void 0:i.customCreateGLContext(this.canvas2,s)):this.gl=this.gl||function(e,t){if(void 0===t&&(t={}),!e)return null;function r(e){console.log(e.statusMessage)}e&&e.addEventListener&&e.addEventListener("webglcontextcreationerror",r,!1);var n=e.getContext("webgl",t);return(n=n||e.getContext("experimental-webgl",t))||(n=(n=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener&&e.removeEventListener("webglcontextcreationerror",r,!1),n}(this.canvas2,s),!this.regl){this.regl=c.default({gl:this.gl,extensions:["OES_texture_float","OES_element_index_uint","WEBGL_color_buffer_float"],attributes:{antialias:!0,preserveDrawingBuffer:!1}});this.command=this.regl({frag:"precision mediump float;\n#define GLSLIFY 1\nvarying vec2 v_texCoord;varying float v_height;uniform sampler2D u_tile;uniform float u_opacity;void main(){vec4 color=texture2D(u_tile,v_texCoord);gl_FragColor=vec4(floor(255.0*color*u_opacity)/255.0);}",vert:"#define GLSLIFY 1\nattribute vec3 a_pos;attribute vec2 a_texCoord;uniform mat4 u_matrix;uniform float u_tile_size;uniform float u_extrude_scale;varying vec2 v_texCoord;varying float v_height;void main(){v_texCoord=a_texCoord;v_height=a_pos.z;gl_Position=u_matrix*vec4(a_pos.x*u_tile_size,(a_pos.y-1.0)*u_tile_size,a_pos.z*u_extrude_scale,1.0);}",attributes:{a_pos:function(e,t){return t.a_pos},a_texCoord:function(e,t){return t.a_texCoord}},uniforms:{u_matrix:function(e,t){return t.u_matrix},u_tile:function(e,t){return t.u_tile},u_tile_size:function(e,t){return t.u_tile_size},u_opacity:function(e,t){return t.u_opacity},u_extrude_scale:function(e,t){return t.u_extrude_scale}},viewport:function(e,t){var r=t.canvasSize;return{width:r[0],height:r[1]}},depth:{enable:!0,mask:!0,func:"less",range:[0,1]},stencil:{enable:!0,func:{cmp:"<=",ref:function(e,t){var r=t.zoom;t.stencilRef;return r},mask:255},op:{fail:"keep",zfail:"keep",zpass:"replace"}},blend:{enable:!0,func:{src:"src alpha",dst:"one minus src alpha"},color:[0,0,0,0]},elements:function(e,t){return t.elements}})}}},t.prototype.resizeCanvas=function(e){if(this.canvas){var t=this.getMap(),r=(t.getDevicePixelRatio?t.getDevicePixelRatio():zr)||1,n=e||t.getSize();this.canvas.width===n.width*r&&this.canvas.height===n.height*r||(this.canvas.height=r*n.height,this.canvas.width=r*n.width),this.canvas2.width===this.canvas.width&&this.canvas2.height===this.canvas.height||(this.canvas2.height=this.canvas.height,this.canvas2.width=this.canvas.width)}},t.prototype.clearCanvas=function(){this.canvas&&this.gl&&(e.prototype.clearCanvas.call(this),this.regl&&this.regl.clear({color:[0,0,0,0],depth:1,stencil:this._tileZoom}))},t.prototype.clear=function(){this._retireTiles(!0);for(var t=this.tileCache.keys(),r=0,n=t.length;r<n;r++){var a=this.tileCache.get(t[r]);a.info&&(a.info.u_tile&&a.info.u_tile.destroy(),a.info.planeBuffer&&(a.info.planeBuffer.elements.destroy(),a.info.planeBuffer.position.buffer.destroy(),a.info.planeBuffer.uvs.buffer.destroy()))}this.tileCache.reset(),this.tilesInView={},this.tilesLoading={},this._parentTiles=[],this._childTiles=[],e.prototype.clear.call(this)},t.prototype.getMap=function(){return e.prototype.getMap.call(this)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.prototype.completeRender=function(){return e.prototype.completeRender.call(this)},t.prototype.setCanvasUpdated=function(){return e.prototype.setCanvasUpdated.call(this)},t.prototype.setToRedraw=function(){return e.prototype.setToRedraw.call(this)},t.prototype.prepareCanvas=function(){return e.prototype.prepareCanvas.call(this)},t.prototype.getTileOpacity=function(t){return e.prototype.getTileOpacity.call(this,t)},t}(r.renderer.TileLayerCanvasRenderer);Wr.registerRenderer("gl",Vr),e.Renderer=Vr,e.default=Wr,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&window.TerrainLayer&&(window.TerrainLayer=window.TerrainLayer.default);
